(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f0697884"],{7703:function(t,e,s){},"924c":function(t,e,s){"use strict";s.r(e);s("4de4");var r=s("5530"),u=s("2f62"),n={mounted:function(){this.$route.params.username&&(this.subAccount=this.$route.params)},data:function(){var t=this;return{subAccount:{username:"",password:""},addingRules:{username:[{required:!0,message:this.$t("subAccount.nameRequiedErrMsg"),trigger:"blur"},{validator:function(e,s,r){s?/^[a-zA-Z0-9]{6,12}$/.test(s)?r():r(new Error(t.$t("subAccount.nameLenfthErrMsh"))):r()}}],password:[{required:!0,message:this.$t("subAccount.passwordRequiredErrMsg"),trigger:"blur"},{min:8,max:16,message:this.$t("subAccount.passwordLengthErrMsg")},{validator:function(e,s,r){s?/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,16}$/.test(s)?r():r(new Error(t.$t("subAccount.passwordTypeErrMsg"))):r()}}]},sameNameRule:{username:[{required:!0,message:this.$t("subAccount.nameRequiedErrMsg"),trigger:"blur"},{validator:function(e,s,r){s?/^[a-zA-Z0-9]{6,12}$/.test(s)?r():r(new Error(t.$t("subAccount.nameLenfthErrMsh"))):r()}},{validator:function(e,s,r){t.subAccountList.filter((function(t){return t.username===s})).length?r(new Error(t.$t("error.sameNameErr"))):r()},trigger:"blur"}]},isLoading:!1}},methods:Object(r.a)(Object(r.a)({complete:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.isLoading=!0;var s={email:t.userinfo.email,shop_id:t.userinfo.role_id},u=Object(r.a)(Object(r.a)({},s),t.subAccount);t.$route.params.username?t.modifySubAccount(u):t.addSubAccount(u)}}))},modifySubAccount:function(t){var e=this;this.alterSub(t).then((function(){e.isLoading=!1,e.subAccount.username="",e.subAccount.password="",e.$alert(e.$t("public.modifySuccessMsg"),"",{confirmButtonText:e.$t("btn.confirm"),center:!0}).then((function(){e.$router.go(-1),e.alterSubAccountM(t)}))})).catch((function(t){t&&(e.isLoading=!1,e.subAccount.username="",e.subAccount.password="",e.$message.error(e.$t("error.serverErr")))}))},addSubAccount:function(t){var e=this;this.registerSubAccount(t).then((function(){e.isLoading=!1,e.subAccount.username="",e.subAccount.password="",e.$alert(e.$t("public.addSuccessMsg"),"",{confirmButtonText:e.$t("btn.confirm"),center:!0})})).catch((function(t){t&&(e.isLoading=!1,e.subAccount.username="",e.subAccount.password="",e.$message.error(e.$t("error.serverErr")))}))}},Object(u.b)({registerSubAccount:"user/registerSubAccount",alterSub:"user/alterSubAccount"})),Object(u.c)({alterSubAccountM:"user/ALTER_SUB_ACCOUNT"})),computed:Object(r.a)(Object(r.a)({},Object(u.d)({userinfo:function(t){return t.user.data},subAccountList:function(t){return t.user.subAccount}})),{},{rules:function(){return this.$route.params.username?this.addingRules:Object(r.a)(Object(r.a)({},this.addingRules),this.sameNameRule)}})},c=(s("ae24"),s("2877")),o=Object(c.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"subaccount_wrapper"},[s("div",{staticClass:"subaccount_content"},[s("div",{staticClass:"subaccount_title"},[t._v(t._s(t.$t("subAccount.title")))]),s("el-form",{ref:"form",attrs:{rules:t.rules,model:t.subAccount}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:t.$t("subAccount.namePlaceholder")},model:{value:t.subAccount.username,callback:function(e){t.$set(t.subAccount,"username",e)},expression:"subAccount.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:t.$t("subAccount.passwordPlaceholder")},model:{value:t.subAccount.password,callback:function(e){t.$set(t.subAccount,"password",e)},expression:"subAccount.password"}})],1)],1),s("el-button",{staticClass:"subaccount_btn",attrs:{type:"primary",loading:t.isLoading},on:{click:t.complete}},[t._v(t._s(t.$t("btn.complete")))])],1)])}),[],!1,null,"501acd41",null);e.default=o.exports},ae24:function(t,e,s){"use strict";var r=s("7703");s.n(r).a}}]);
//# sourceMappingURL=chunk-f0697884.900c16dc.js.map