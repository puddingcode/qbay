{"version":3,"sources":["webpack:///./src/views/commodity/commodityList/index.vue?ae72","webpack:///./src/views/commodity/commodityList/components/SortItem.vue?9898","webpack:///src/views/commodity/commodityList/components/SortItem.vue","webpack:///./src/views/commodity/commodityList/components/SortItem.vue","webpack:///./src/views/commodity/commodityList/components/SortItem.vue?5417","webpack:///./src/views/commodity/commodityList/index.vue?303d","webpack:///src/views/commodity/commodityList/index.vue","webpack:///./src/views/commodity/commodityList/index.vue","webpack:///./src/views/commodity/commodityList/components/SortItem.vue?970e","webpack:///./src/views/commodity/commodityList/index.vue?3af8","webpack:///./src/util/loading.js"],"names":["_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","loadingShow","expression","staticClass","ref","staticStyle","attrs","commodityList","$t","scopedSlots","_u","key","fn","scope","$index","oss_url","slot","_v","_s","base_price","on","$event","changeSwitch","model","callback","$$v","$set","modifyCommodity","loadingArray","deleteCommodity","total","prevClick","nextClick","currentChange","tabClick","activeName","_l","item","id","show","currentComponent","tag","newCommodityList","commodityNum","categoryId","deleteACommodity","_e","loadingInstance","startLoading","targetdq","options","text","background","target","document","querySelector","customClass","Loading","service","endLoading","close"],"mappings":"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","file":"js/chunk-651b9338.f9b2bab8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"commodity_wrapper\"},[_c('el-scrollbar',{staticClass:\"commodity_title\"},[_c('el-tabs',{staticClass:\"sidebar_tab\",staticStyle:{},attrs:{\"tab-position\":\"left\"},on:{\"tab-click\":_vm.tabClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":_vm.$t('commodity.all'),\"name\":\"All\"}}),_vm._l((_vm.categoryList),function(item){return _c('el-tab-pane',{key:item.id,attrs:{\"label\":item.name,\"name\":item.id + '',\"data-id\":item.id}})})],2)],1),_c('div',{staticClass:\"commodity_content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.show),expression:\"!show\"}],staticClass:\"loading_wrapper\"}),(_vm.show)?_c(_vm.currentComponent,{tag:\"component\",attrs:{\"commodityList\":_vm.newCommodityList,\"total\":_vm.commodityNum,\"categoryId\":_vm.categoryId},on:{\"deleteACommodity\":_vm.deleteACommodity}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortItem.vue?vue&type=script&lang=js&\"","<template>\r\n  <div>\r\n    <div class=\"sortitem_loading_wrapper\"\r\n         v-show=\"!loadingShow\"></div>\r\n    <div v-show=\"loadingShow\"\r\n         class=\"commodity_list\">\r\n      <el-table ref=\"itemTable\"\r\n                :data=\"commodityList\"\r\n                height=\"96%\"\r\n                style=\"width: 100%;\">\r\n        <el-table-column :label=\"$t('commodity.commodity')\"\r\n                         width=\"width\">\r\n          <template slot-scope=\"scope\">\r\n            <el-row :gutter=\"10\">\r\n              <el-col :span=\"12\">\r\n                <el-image referrer-policy=\"strict-origin-when-cross-origin\"\r\n                          style=\"width: 100px; height: 100px;\"\r\n                          :src=\"commodityList[scope.$index].oss_url\">\r\n                  <div slot=\"error\"\r\n                       class=\"image-slot\">\r\n                    <i class=\"el-icon-picture-outline\"></i>\r\n                  </div>\r\n                </el-image>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <div>{{ commodityList[scope.$index].name }}</div>\r\n                <div>{{ commodityList[scope.$index].base_price }}$</div>\r\n              </el-col>\r\n            </el-row>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('commodity.display')\"\r\n                         min-width=\"20%\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch v-model=\"commodityList[scope.$index].status\"\r\n                       active-color=\"#FE7922\"\r\n                       inactive-color=\"#DCDCDC\"\r\n                       @change=\"changeSwitch(scope)\"></el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"small\"\r\n                       type=\"primary\"\r\n                       @click=\"modifyCommodity(scope)\">\r\n              {{ $t('btn.modify') }}\r\n            </el-button>\r\n            <el-button size=\"small\"\r\n                       type=\"primary\"\r\n                       :loading=\"loadingArray[scope.$index]\"\r\n                       plain\r\n                       @click=\"deleteCommodity(scope)\">\r\n              {{ $t('btn.delete') }}\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination background\r\n                     :page-size=\"10\"\r\n                     layout=\"prev, pager, next\"\r\n                     :total=\"total\"\r\n                     @prev-click=\"prevClick\"\r\n                     @next-click=\"nextClick\"\r\n                     @current-change=\"currentChange\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { commodityAPI } from \"@/api\";\r\n  import { mapActions, mapState } from \"vuex\";\r\n  import { copyObjectProperties } from \"@/util\";\r\n  import { startLoading, endLoading } from \"@/util/loading.js\";\r\n\r\n  export default {\r\n    created() {\r\n      this.loadingArray = this.getLoadingArray();\r\n    },\r\n    props: [\"commodityList\", \"total\", \"categoryId\"],\r\n    data() {\r\n      return {\r\n        sortItems: [],\r\n        loadingArray: [],\r\n        loadingShow: true,\r\n      };\r\n    },\r\n    methods: {\r\n      modifyCommodity(scope) {\r\n        const id = this.commodityList[scope.$index].id;\r\n        this.$router.push({\r\n          name: \"Adding Goods\",\r\n          params: {\r\n            id: id,\r\n          },\r\n        });\r\n      },\r\n      async deleteCommodity(scope) {\r\n        this.loadingArray.splice(scope.$index, 1, true);\r\n        const id = this.commodityList[scope.$index].id;\r\n        let ret = await commodityAPI.deleteCommodity({\r\n          id: id,\r\n        });\r\n        // 删除成功，删掉列表中的一项\r\n        if (ret.data.id) {\r\n          this.loadingArray.splice(scope.$index, 1, false);\r\n          this.$emit(\"deleteACommodity\", ret.data.id);\r\n        } else {\r\n          // 删除失败\r\n        }\r\n        // mock\r\n        // await commodityAPI.deleteCommodity1({\r\n        //     id: id,\r\n        // });\r\n      },\r\n      changeSwitch(scope) {\r\n        let status = this.commodityList[scope.$index].status;\r\n        // let params = { ...scope.row, status: Number(status) };\r\n        let listArr = [\r\n          \"id\",\r\n          \"name\",\r\n          \"oss_url\",\r\n          \"shop_id\",\r\n          \"category_id\",\r\n          \"status\",\r\n          \"base_price\",\r\n          \"size\",\r\n          \"description\",\r\n        ];\r\n        let params = {\r\n          ...copyObjectProperties(scope.row, listArr),\r\n          status: Number(status),\r\n          size: JSON.parse(scope.row.size),\r\n        };\r\n        this.modify_commodity(params);\r\n      },\r\n      ...mapActions({\r\n        modify_commodity: \"commodity/modifyCommodity\",\r\n      }),\r\n      getLoadingArray() {\r\n        let loadingArray = [];\r\n        if (this.commodityList) {\r\n          this.commodityList.forEach((item) => {\r\n            return loadingArray.push(item.isLoading);\r\n          });\r\n        }\r\n        return loadingArray;\r\n      },\r\n      // 请求页面\r\n      getAPageOfProductList(value) {\r\n        let obj;\r\n        this.categoryId\r\n          ? (obj = {\r\n              shop_id: this.shopId,\r\n              category_id: this.categoryId,\r\n              page: value,\r\n              pageNum: 10,\r\n            })\r\n          : (obj = {\r\n              shop_id: this.shopId,\r\n              page: value,\r\n              pageNum: 10,\r\n            });\r\n        this.$refs.itemTable.bodyWrapper.scrollTop = 0;\r\n        startLoading(\".sortitem_loading_wrapper\");\r\n        this.loadingShow = false;\r\n        this.getProductList(obj).then(() => {\r\n          this.$nextTick(() => endLoading());\r\n          this.loadingShow = true;\r\n        });\r\n      },\r\n      // 当前页\r\n      prevClick(value) {\r\n        this.getAPageOfProductList(value);\r\n      },\r\n      // 当前页\r\n      nextClick(value) {\r\n        this.getAPageOfProductList(value);\r\n      },\r\n      currentChange(value) {\r\n        this.getAPageOfProductList(value);\r\n      },\r\n      ...mapActions({\r\n        getProductList: \"commodity/getCommodityList\",\r\n      }),\r\n    },\r\n    computed: {\r\n      ...mapState({\r\n        shopId: (state) => state.user.data.role_id,\r\n      }),\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .commodity_list {\r\n    height: calc(100vh - 200px);\r\n  }\r\n\r\n  .sortitem_loading_wrapper {\r\n    padding: 5em;\r\n  }\r\n\r\n  ::v-deep .el-table__body-wrapper {\r\n    height: 90% !important;\r\n  }\r\n</style>\r\n","import { render, staticRenderFns } from \"./SortItem.vue?vue&type=template&id=c13d8c68&scoped=true&\"\nimport script from \"./SortItem.vue?vue&type=script&lang=js&\"\nexport * from \"./SortItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SortItem.vue?vue&type=style&index=0&id=c13d8c68&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c13d8c68\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loadingShow),expression:\"!loadingShow\"}],staticClass:\"sortitem_loading_wrapper\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loadingShow),expression:\"loadingShow\"}],staticClass:\"commodity_list\"},[_c('el-table',{ref:\"itemTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.commodityList,\"height\":\"96%\"}},[_c('el-table-column',{attrs:{\"label\":_vm.$t('commodity.commodity'),\"width\":\"width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-image',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"referrer-policy\":\"strict-origin-when-cross-origin\",\"src\":_vm.commodityList[scope.$index].oss_url}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"})])])],1),_c('el-col',{attrs:{\"span\":12}},[_c('div',[_vm._v(_vm._s(_vm.commodityList[scope.$index].name))]),_c('div',[_vm._v(_vm._s(_vm.commodityList[scope.$index].base_price)+\"$\")])])],1)]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('commodity.display'),\"min-width\":\"20%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#FE7922\",\"inactive-color\":\"#DCDCDC\"},on:{\"change\":function($event){return _vm.changeSwitch(scope)}},model:{value:(_vm.commodityList[scope.$index].status),callback:function ($$v) {_vm.$set(_vm.commodityList[scope.$index], \"status\", $$v)},expression:\"commodityList[scope.$index].status\"}})]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.modifyCommodity(scope)}}},[_vm._v(\" \"+_vm._s(_vm.$t('btn.modify'))+\" \")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.loadingArray[scope.$index],\"plain\":\"\"},on:{\"click\":function($event){return _vm.deleteCommodity(scope)}}},[_vm._v(\" \"+_vm._s(_vm.$t('btn.delete'))+\" \")])]}}])})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"page-size\":10,\"layout\":\"prev, pager, next\",\"total\":_vm.total},on:{\"prev-click\":_vm.prevClick,\"next-click\":_vm.nextClick,\"current-change\":_vm.currentChange}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\r\n<div class=\"commodity_wrapper\">\r\n    <el-scrollbar class=\"commodity_title\">\r\n        <el-tabs tab-position=\"left\" v-model=\"activeName\" @tab-click=\"tabClick\" class=\"sidebar_tab\" style=\"text-align：left\">\r\n            <el-tab-pane :label=\"$t('commodity.all')\" name=\"All\"> </el-tab-pane>\r\n            <el-tab-pane v-for=\"item in categoryList\" :key=\"item.id\" :label=\"item.name\" :name=\"item.id + ''\" :data-id=\"item.id\">\r\n            </el-tab-pane>\r\n        </el-tabs>\r\n    </el-scrollbar>\r\n    <div class=\"commodity_content\">\r\n        <div class=\"loading_wrapper\" v-show=\"!show\"></div>\r\n        <component v-if=\"show\" :is=\"currentComponent\" :commodityList=\"newCommodityList\" @deleteACommodity=\"deleteACommodity\" :total=\"commodityNum\" :categoryId=\"categoryId\"></component>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport SortItem from './components/SortItem';\r\nimport {\r\n    mapActions,\r\n    mapMutations,\r\n    mapState\r\n} from 'vuex';\r\n\r\nimport {\r\n    startLoading,\r\n    endLoading\r\n} from '@/util/loading.js';\r\nexport default {\r\n    mounted() {\r\n        let obj = {\r\n            shop_id: this.shopId,\r\n            page: 1,\r\n            pageNum: 10,\r\n        };\r\n        if (this.commodityList.length < 1) {\r\n            this.show = false;\r\n        }\r\n        startLoading('.loading_wrapper');\r\n        this.getProductCategories();\r\n        this.getCommodityList(obj).then(() => {\r\n            this.$nextTick(() => endLoading());\r\n            this.show = true;\r\n        });\r\n    },\r\n    data() {\r\n        return {\r\n            activeName: 'All',\r\n            currentComponent: SortItem,\r\n            show: true,\r\n            categoryId: null,\r\n        };\r\n    },\r\n    methods: {\r\n        getProductCategories() {\r\n            this.$store.dispatch('commodity/getCommodityCategorityList', {\r\n                shop_id: this.shopId,\r\n            });\r\n        },\r\n        //\r\n        deleteACommodity(id) {\r\n            this.deleteCommodity(id);\r\n        },\r\n        tabClick(e) {\r\n            this.activeName = e.name;\r\n            this.show = false;\r\n            startLoading('.loading_wrapper');\r\n            let params;\r\n            if (e.name === 'All') {\r\n                this.categoryId = null;\r\n                params = {\r\n                    shop_id: this.shopId,\r\n                    page: 1,\r\n                    pageNum: 10,\r\n                };\r\n            } else {\r\n                this.categoryId = e.$attrs['data-id'];\r\n                params = {\r\n                    shop_id: this.shopId,\r\n                    category_id: e.$attrs['data-id'],\r\n                    page: 1,\r\n                    pageNum: 10,\r\n                };\r\n            }\r\n            this.getCommodityList(params).then(() => {\r\n                this.$nextTick(() => endLoading());\r\n                this.show = true;\r\n            });\r\n        },\r\n        ...mapActions({\r\n            getCommodityList: 'commodity/getCommodityList',\r\n            modifyCommodity: 'commodity/modifyCommodity',\r\n        }),\r\n        ...mapMutations({\r\n            deleteCommodity: 'commodity/UPDATE_COMMODITY_LIST',\r\n        }),\r\n    },\r\n    computed: {\r\n        commodityStatus() {\r\n            return this.$refs.switch;\r\n        },\r\n        ...mapState({\r\n            shopId: (state) => state.user.data.role_id,\r\n            categoryList: (state) => state.commodity.commodityCategorityList,\r\n            commodityList: (state) => state.commodity.commodityList,\r\n            commodityNum: (state) => state.commodity.commodityNum,\r\n        }),\r\n        newCommodityList() {\r\n            let obj = this.commodityList.reduce((acc, cur) => {\r\n                cur.status = !!cur.status;\r\n                cur.isLoading = false;\r\n                acc.push(cur);\r\n                return acc;\r\n            }, []);\r\n            return obj;\r\n        },\r\n    },\r\n    components: {\r\n        SortItem,\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-scrollbar__wrap {\r\n    overflow-x: hidden;\r\n}\r\n\r\n.el-scrollbar__bar.is-horizontal {\r\n    display: none;\r\n}\r\n\r\n.el-scrollbar__bar {\r\n    opacity: 1;\r\n}\r\n\r\n.commodity_title {\r\n    height: 100%;\r\n}\r\n\r\n.sidebar_tab ::v-deep .el-tabs__item {\r\n    text-align: left !important;\r\n}\r\n\r\n.commodity_wrapper {\r\n    display: flex;\r\n    height: 100%;\r\n    flex-direction: row;\r\n}\r\n\r\n.commodity_content {\r\n    flex: 1;\r\n    width: 300px;\r\n\r\n    .loading_wrapper {\r\n        padding: 5em;\r\n    }\r\n}\r\n</style>\r\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=348b3b2c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=348b3b2c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"348b3b2c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortItem.vue?vue&type=style&index=0&id=c13d8c68&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortItem.vue?vue&type=style&index=0&id=c13d8c68&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=348b3b2c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=348b3b2c&lang=scss&scoped=true&\"","import { Loading } from 'element-ui'\r\n\r\nlet loadingInstance\r\n\r\nexport function startLoading(targetdq) {\r\n    let options = {\r\n        text: 'loading......',\r\n        background: 'rgba(255, 255, 255, 0.6)',\r\n        target: document.querySelector(targetdq) || 'body',\r\n        customClass: 'server_loading'\r\n    }\r\n    loadingInstance = Loading.service(options)\r\n}\r\n\r\nexport function endLoading() {\r\n    loadingInstance.close()\r\n}\r\n\r\n"],"sourceRoot":""}