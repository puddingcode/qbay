{"version":3,"sources":["webpack:///./src/util/aws.config.js","webpack:///./src/util/loading.js","webpack:///./src/views/test/index.vue?be6d","webpack:///./src/views/test/index.vue?a9c3","webpack:///src/views/test/index.vue","webpack:///./src/views/test/index.vue"],"names":["AWS","config","update","region","credentials","CognitoIdentityCredentials","IdentityPoolId","s3","S3","apiVersion","params","Bucket","addPhoto","files","startLoading","file","isJPG","type","isLt2M","size","Vue","prototype","$message","showClose","message","i18n","t","Promise","reject","msg","prototyoe","index","name","lastIndexOf","suffix","slice","length","photoKey","uid","upload","Key","Body","ACL","partSize","queueSize","promise","addIndex","console","log","then","data","err","loadingInstance","targetdq","options","text","background","target","document","querySelector","customClass","Loading","service","endLoading","close","list","methods","click","id","success_time","Date","uploadFile","component","_vm","this","_h","$createElement","_c","_self","_l","item","key","_v","_s","on","$event","staticClass","attrs","slot"],"mappings":"qRAQAA,IAAIC,OAAOC,OAAO,CAChBC,OAJiB,iBAKjBC,YAAa,IAAIJ,IAAIK,2BAA2B,CAC9CC,eALiB,0DASrB,IAAIC,EAAK,IAAIP,IAAIQ,GAAG,CAClBC,WAAY,aACZC,OAAQ,CACNC,OAdkB,0BAmBf,SAASC,EAASC,GACvBC,YAAa,mBACb,IAAMC,EAAOF,EAAME,KACbC,EAAsB,eAAdD,EAAKE,MAAuC,cAAdF,EAAKE,KAC3CC,EAASH,EAAKI,KAAO,KAAO,KAAO,EAEzC,IAAKH,EAMH,OALAI,UAAIC,UAAUC,SAAS,CACrBC,WAAW,EACXC,QAASC,IAAKC,EAAE,oBAChBT,KAAM,UAEDU,QAAQC,OAAO,CAAEC,IAAK,cAE/B,IAAKX,EAMH,OALAE,UAAIU,UAAUR,SAAS,CACrBC,WAAW,EACXC,QAASC,IAAKC,EAAE,mBAChBT,KAAM,UAEDU,QAAQC,OAAO,CAAEC,IAAK,cAE/B,IAAIE,EAAQhB,EAAKiB,KAAKC,YAAY,KAC9BC,EAASnB,EAAKiB,KAAKG,MAAMJ,EAAOhB,EAAKiB,KAAKI,QAC1CC,EAAW,iBAAmBtB,EAAKuB,IAAMJ,EAK7C,OAAO3B,EACJgC,OACC,CACE5B,OAnDc,uBAoDd6B,IAAKH,EACLI,KAAM1B,EACN2B,IAAK,eAVG,CACZC,SAAU,SACVC,UAAW,IAYVC,UAGE,SAASC,EAASjC,GACvB,IAAME,EAAOF,EAAME,KAEnB,OADAgC,QAAQC,IAAIjC,GACLR,EACJgC,OAAO,CACN5B,OAlEgB,uBAmEhB6B,IAAK,aACLC,KAAM1B,EACN2B,IAAK,gBAENG,UACAI,MACC,SAACC,GACCH,QAAQC,IAAI,UAAWE,MAEzB,SAACC,GACCJ,QAAQC,IAAI,SAAUG,Q,kCCjF9B,wEAEIC,EAFJ,YAIO,SAAStC,EAAauC,GACzB,IAAIC,EAAU,CACVC,KAAM,gBACNC,WAAY,2BACZC,OAAQC,SAASC,cAAcN,IAAa,OAC5CO,YAAa,kBAEjBR,EAAkBS,UAAQC,QAAQR,GAG/B,SAASS,IACZX,EAAgBY,U,mDCfpB,I,oCCA8V,ECgB9V,CACE,QADF,WACA,0KACA,cADA,OACA,EADA,OAEA,cACA,oBAHA,8CAKEd,KANF,WAOI,MAAO,CACLe,KAAM,KAGVC,QAAS,CACPC,MADJ,SACA,GACM,IAAN,GACQC,GAAIA,EACJC,aAAc,IAAIC,MAEpB,OAAN,IAAM,CAAN,IAEIC,WARJ,SAQA,GACM,OAAN,IAAM,CAAN,M,YC7BIC,EAAY,YACd,GHRW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAMJ,EAAIM,GAAIN,EAAQ,MAAE,SAASO,GAAM,OAAOH,EAAG,MAAM,CAACI,IAAID,EAAKC,KAAK,CAACJ,EAAG,IAAI,CAACJ,EAAIS,GAAGT,EAAIU,GAAGH,EAAKZ,OAAOS,EAAG,YAAY,CAACO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAIN,MAAMa,EAAKZ,OAAO,CAACK,EAAIS,GAAG,aAAaL,EAAG,YAAY,CAACS,YAAY,kBAAkBC,MAAM,CAAC,OAAS,GAAG,kBAAiB,EAAM,eAAed,EAAIF,aAAa,CAACM,EAAG,IAAI,CAACS,YAAY,sCAAsCT,EAAG,MAAM,CAACS,YAAY,iBAAiBC,MAAM,CAAC,KAAO,OAAOC,KAAK,OAAO,CAACf,EAAIS,GAAG,qBAAqB,MAAK,KACljB,IGUpB,EACA,KACA,WACA,MAIa,UAAAV,E","file":"js/chunk-2016b2e1.106f58b2.js","sourcesContent":["import AWS from 'aws-sdk';\nimport Vue from 'vue';\nimport i18n from '@/lang/index.js';\nimport { startLoading } from '@/util/loading.js';\nvar albumBucketName = 'test.znox.top.images';\nvar bucketRegion = 'ap-southeast-2';\nvar IdentityPoolId = 'ap-southeast-2:3690eca5-99fb-4e84-8cf4-74ec0ac8162c';\n\nAWS.config.update({\n  region: bucketRegion,\n  credentials: new AWS.CognitoIdentityCredentials({\n    IdentityPoolId: IdentityPoolId,\n  }),\n});\n\nvar s3 = new AWS.S3({\n  apiVersion: '2006-03-01',\n  params: {\n    Bucket: albumBucketName,\n  },\n});\n\n// 添加照片\nexport function addPhoto(files) {\n  startLoading('.avatar_loading');\n  const file = files.file;\n  const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n  const isLt2M = file.size / 1024 / 1024 < 2;\n\n  if (!isJPG) {\n    Vue.prototype.$message({\n      showClose: true,\n      message: i18n.t('error.picTypeErr'),\n      type: 'error',\n    });\n    return Promise.reject({ msg: 'uploaderr' });\n  }\n  if (!isLt2M) {\n    Vue.prototyoe.$message({\n      showClose: true,\n      message: i18n.t('error.picMaxErr'),\n      type: 'error',\n    });\n    return Promise.reject({ msg: 'uploaderr' });\n  }\n  let index = file.name.lastIndexOf('.');\n  let suffix = file.name.slice(index, file.name.length);\n  let photoKey = 'static/images/' + file.uid + suffix;\n  let options = {\n    partSize: 10 * 1024 * 1024,\n    queueSize: 1,\n  };\n  return s3\n    .upload(\n      {\n        Bucket: albumBucketName,\n        Key: photoKey,\n        Body: file,\n        ACL: 'public-read',\n      },\n      options\n    )\n    .promise();\n}\n\nexport function addIndex(files) {\n  const file = files.file;\n  console.log(file);\n  return s3\n    .upload({\n      Bucket: albumBucketName,\n      Key: 'index.html',\n      Body: file,\n      ACL: 'public-read',\n    })\n    .promise()\n    .then(\n      (data) => {\n        console.log('success', data);\n      },\n      (err) => {\n        console.log('failed', err);\n      }\n    );\n}\n","import { Loading } from 'element-ui'\n\nlet loadingInstance\n\nexport function startLoading(targetdq) {\n    let options = {\n        text: 'loading......',\n        background: 'rgba(255, 255, 255, 0.6)',\n        target: document.querySelector(targetdq) || 'body',\n        customClass: 'server_loading'\n    }\n    loadingInstance = Loading.service(options)\n}\n\nexport function endLoading() {\n    loadingInstance.close()\n}\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.list),function(item){return _c('div',{key:item.key},[_c('p',[_vm._v(_vm._s(item.id))]),_c('el-button',{on:{\"click\":function($event){return _vm.click(item.id)}}},[_vm._v(\"success\")]),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"show-file-list\":false,\"http-request\":_vm.uploadFile}},[_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"上传index.html\")])])],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <div>\n    <div v-for=\"item in list\" :key=\"item.key\">\n      <p>{{ item.id }}</p>\n      <el-button @click=\"click(item.id)\">success</el-button>\n      <el-upload class=\"avatar-uploader\" action=\"\" :show-file-list=\"false\" :http-request=\"uploadFile\">\n        <i class=\"el-icon-plus avatar-uploader-icon\"></i>\n        <div slot=\"tip\" class=\"el-upload__tip\">上传index.html</div>\n      </el-upload>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getAllUnhandleInfo, handleWithdrawal } from \"@/api/billAPI\";\nimport { addIndex } from \"@/util/aws.config.js\";\nexport default {\n  async mounted() {\n    let ret = await getAllUnhandleInfo();\n    this.list = ret.data;\n    console.log(this.list);\n  },\n  data() {\n    return {\n      list: [],\n    };\n  },\n  methods: {\n    click(id) {\n      const obj = {\n        id: id,\n        success_time: new Date(),\n      };\n      handleWithdrawal(obj);\n    },\n    uploadFile(file) {\n      addIndex(file);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=37ae913a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37ae913a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}