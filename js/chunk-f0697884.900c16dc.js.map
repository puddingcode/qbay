{"version":3,"sources":["webpack:///./src/views/subAccount/addSubAccount/index.vue?10a0","webpack:///./src/views/subAccount/addSubAccount/index.vue?8b3a","webpack:///src/views/subAccount/addSubAccount/index.vue","webpack:///./src/views/subAccount/addSubAccount/index.vue","webpack:///./src/views/subAccount/addSubAccount/index.vue?48d1"],"names":["mounted","this","$route","params","username","subAccount","data","password","addingRules","sameNameRule","isLoading","methods","complete","$refs","form","validate","valid","email","shop_id","modifySubAccount","alterSub","addSubAccount","registerSubAccount","computed","rules","component","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","$t","ref","attrs","model","value","callback","$$v","$set","expression","on"],"mappings":"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","file":"js/chunk-f0697884.900c16dc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"subaccount_wrapper\"},[_c('div',{staticClass:\"subaccount_content\"},[_c('div',{staticClass:\"subaccount_title\"},[_vm._v(_vm._s(_vm.$t(\"subAccount.title\")))]),_c('el-form',{ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.subAccount}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('subAccount.namePlaceholder')},model:{value:(_vm.subAccount.username),callback:function ($$v) {_vm.$set(_vm.subAccount, \"username\", $$v)},expression:\"subAccount.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":_vm.$t('subAccount.passwordPlaceholder')},model:{value:(_vm.subAccount.password),callback:function ($$v) {_vm.$set(_vm.subAccount, \"password\", $$v)},expression:\"subAccount.password\"}})],1)],1),_c('el-button',{staticClass:\"subaccount_btn\",attrs:{\"type\":\"primary\",\"loading\":_vm.isLoading},on:{\"click\":_vm.complete}},[_vm._v(_vm._s(_vm.$t(\"btn.complete\")))])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"subaccount_wrapper\">\r\n    <div class=\"subaccount_content\">\r\n      <div class=\"subaccount_title\">{{ $t(\"subAccount.title\") }}</div>\r\n      <el-form ref=\"form\" :rules=\"rules\" :model=\"subAccount\">\r\n        <el-form-item prop=\"username\">\r\n          <el-input v-model=\"subAccount.username\" :placeholder=\"$t('subAccount.namePlaceholder')\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\">\r\n          <el-input v-model=\"subAccount.password\" type=\"password\" :placeholder=\"$t('subAccount.passwordPlaceholder')\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-button class=\"subaccount_btn\" type=\"primary\" :loading=\"isLoading\" @click=\"complete\">{{ $t(\"btn.complete\") }}</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapMutations, mapState } from \"vuex\";\r\nexport default {\r\n  mounted() {\r\n    if (this.$route.params.username) {\r\n      this.subAccount = this.$route.params;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      subAccount: {\r\n        username: \"\",\r\n        password: \"\",\r\n      },\r\n      addingRules: {\r\n        username: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"subAccount.nameRequiedErrMsg\"),\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              let reg = /^[a-zA-Z0-9]{6,12}$/;\r\n              if (value) {\r\n                if (!reg.test(value)) {\r\n                  callback(new Error(this.$t(\"subAccount.nameLenfthErrMsh\")));\r\n                } else {\r\n                  callback();\r\n                }\r\n              } else {\r\n                callback();\r\n              }\r\n            },\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"subAccount.passwordRequiredErrMsg\"),\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            min: 8,\r\n            max: 16,\r\n            message: this.$t(\"subAccount.passwordLengthErrMsg\"),\r\n          },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              let reg = /^(?![\\d]+$)(?![a-zA-Z]+$)(?![^\\da-zA-Z]+$).{8,16}$/;\r\n              if (value) {\r\n                if (!reg.test(value)) {\r\n                  callback(new Error(this.$t(\"subAccount.passwordTypeErrMsg\")));\r\n                } else {\r\n                  callback();\r\n                }\r\n              } else {\r\n                callback();\r\n              }\r\n            },\r\n          },\r\n        ],\r\n      },\r\n      sameNameRule: {\r\n        username: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"subAccount.nameRequiedErrMsg\"),\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              let reg = /^[a-zA-Z0-9]{6,12}$/;\r\n              if (value) {\r\n                if (!reg.test(value)) {\r\n                  callback(new Error(this.$t(\"subAccount.nameLenfthErrMsh\")));\r\n                } else {\r\n                  callback();\r\n                }\r\n              } else {\r\n                callback();\r\n              }\r\n            },\r\n          },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (this.subAccountList.filter((item) => item.username === value).length) {\r\n                callback(new Error(this.$t(\"error.sameNameErr\")));\r\n              } else {\r\n                callback();\r\n              }\r\n            },\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n\r\n      isLoading: false,\r\n    };\r\n  },\r\n  methods: {\r\n    complete() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          this.isLoading = true;\r\n          let obj = {\r\n            email: this.userinfo.email,\r\n            shop_id: this.userinfo.role_id,\r\n          };\r\n          let params = {\r\n            ...obj,\r\n            ...this.subAccount,\r\n          };\r\n          if (this.$route.params.username) {\r\n            // 走修改逻辑\r\n            this.modifySubAccount(params);\r\n          } else {\r\n            this.addSubAccount(params);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    modifySubAccount(params) {\r\n      this.alterSub(params)\r\n        .then(() => {\r\n          this.isLoading = false;\r\n          this.subAccount.username = \"\";\r\n          this.subAccount.password = \"\";\r\n          this.$alert(this.$t(\"public.modifySuccessMsg\"), \"\", {\r\n            confirmButtonText: this.$t(\"btn.confirm\"),\r\n            center: true,\r\n          }).then(() => {\r\n            this.$router.go(-1);\r\n            this.alterSubAccountM(params);\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          if (err) {\r\n            this.isLoading = false;\r\n            this.subAccount.username = \"\";\r\n            this.subAccount.password = \"\";\r\n            this.$message.error(this.$t(\"error.serverErr\"));\r\n          }\r\n        });\r\n    },\r\n    addSubAccount(params) {\r\n      this.registerSubAccount(params)\r\n        .then(() => {\r\n          this.isLoading = false;\r\n          this.subAccount.username = \"\";\r\n          this.subAccount.password = \"\";\r\n          this.$alert(this.$t(\"public.addSuccessMsg\"), \"\", {\r\n            confirmButtonText: this.$t(\"btn.confirm\"),\r\n            center: true,\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          if (err) {\r\n            this.isLoading = false;\r\n            this.subAccount.username = \"\";\r\n            this.subAccount.password = \"\";\r\n            this.$message.error(this.$t(\"error.serverErr\"));\r\n          }\r\n        });\r\n    },\r\n    ...mapActions({\r\n      registerSubAccount: \"user/registerSubAccount\",\r\n      alterSub: \"user/alterSubAccount\",\r\n    }),\r\n    ...mapMutations({\r\n      alterSubAccountM: \"user/ALTER_SUB_ACCOUNT\",\r\n    }),\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      userinfo: (state) => state.user.data,\r\n      subAccountList: (state) => state.user.subAccount,\r\n    }),\r\n    rules() {\r\n      if (this.$route.params.username) {\r\n        // params存在，就不校验重复名字\r\n        return this.addingRules;\r\n      } else {\r\n        return {\r\n          ...this.addingRules,\r\n          ...this.sameNameRule,\r\n        };\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.subaccount_wrapper {\r\n  text-align: center;\r\n  height: calc(100vh - 230px);\r\n  .subaccount_content {\r\n    padding: 5em 8em 0;\r\n    box-sizing: border-box;\r\n    height: 100%;\r\n    overflow-y: auto;\r\n  }\r\n}\r\n\r\n.subaccount_title {\r\n  text-align: left;\r\n  color: $--color-primary;\r\n  padding-bottom: 3em;\r\n}\r\n\r\n.subaccount_btn {\r\n  width: 50%;\r\n  margin: auto;\r\n}\r\n</style>\r\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=501acd41&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=501acd41&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"501acd41\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=501acd41&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=501acd41&lang=scss&scoped=true&\""],"sourceRoot":""}