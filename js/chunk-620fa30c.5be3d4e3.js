(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-620fa30c"],{1:function(e,t){},"1a9d":function(e,t,a){"use strict";a.r(t);a("13d5"),a("b0c0");var n=a("5530"),r=a("ade3");a("c19f"),a("d3b7"),a("3ca3"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("ddb0"),a("2b3d"),a("a4d3"),a("e01a"),a("d28b");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=a("1146"),s=a.n(i);function l(e,t){var a,n,r=s.a.utils.json_to_sheet(e),i=s.a.utils.book_new();s.a.utils.book_append_sheet(i,r,t),function(e,t){"object"==o(e)&&e instanceof Blob&&(e=URL.createObjectURL(e));var a,n=document.createElement("a");n.href=e,n.download=t||"",window.MouseEvent?a=new MouseEvent("click"):(a=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);n.dispatchEvent(a)}((a=i,n=s.a.write(a,{bookType:"xlsx",bookSST:!1,type:"binary"}),new Blob([function(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0;n!=e.length;++n)a[n]=255&e.charCodeAt(n);return t}(n)],{type:"application/octet-stream"})),t+".xlsx")}var c=a("f17b"),d=a("c1fb"),u=a("4260");function h(e){var t=Object(u.c)(e);return d.b.get("get_orders/v1"+t)}var p=a("634b"),f=a("2f62"),y=a("333d"),m=a("e43c"),v=[{dataKey:"sales"},{dataKey:"name",min:0,max:1}],g=[{dataKey:"price",min:0},{dataKey:"name",min:0,max:1}],b={created:function(){var e,t=this;(void 0)();var a=this.$t("analyze.orderTime"),n=this.$t("analyze.orderId"),o=this.$t("analyze.orderTotalPrice"),i=this.$t("analyze.taxRant"),s=this.$t("analyze.tax"),l=[(e={},Object(r.a)(e,a,123),Object(r.a)(e,n,2),Object(r.a)(e,o,12),Object(r.a)(e,i,"0.8%"),Object(r.a)(e,s,12),e)];console.log(l),d.b.get("get_analyze_data/v1").then((function(e){t.analyzeInfo=e.data})),Object(c.getCommodityList)()},mounted:function(){this.getTaxData(),this.getProductData(),this.getIncome()},data:function(){var e;return{analyzeInfo:{today_order_total_price:0,total_order_price:0,today_invalid_orders:0,today_valid_orders:0,total_valid_orders:0,total_invalid_orders:0,yesterday_order_total_price:0,last_week_order_total_price:0,this_week_order_total_price:0},color:"#1fab89",scale:v,zhexianscale:g,height:300,saleType:"week",incomeType:"day",TaxShowTime:"day",dayIncomeOrder:[],monthIncomeOrder:[],salesOptions:[{label:this.$t("select.day"),value:"day"},{label:this.$t("select.week"),value:"week"},{label:this.$t("select.month"),value:"month"}],incomeOptions:[{label:this.$t("select.day"),value:"day"},{label:this.$t("select.month"),value:"month"}],taxOptions:[{label:this.$t("select.day"),value:"day"},{label:this.$t("select.week"),value:"week"},{label:this.$t("select.month"),value:"month"}],tablecols:[{label:this.$t("analyze.orderId"),id:"id"},{label:this.$t("analyze.orderTotalPrice"),id:"order_total_price"},{label:this.$t("analyze.orderReceivePrice"),id:"order_price"},{label:this.$t("analyze.taxRant"),id:"tax_rate"},{label:this.$t("analyze.tax"),id:"tax"}],excelData:[],ordersTotal:0,productData:[],sheetData:[(e={},Object(r.a)(e,this.$t("analyze.orderTime"),123),Object(r.a)(e,this.$t("analyze.orderId"),2),Object(r.a)(e,this.$t("analyze.orderTotalPrice"),12),Object(r.a)(e,this.$t("analyze.taxRant"),"0.8%"),Object(r.a)(e,this.$t("analyze.tax"),12),e)],dayOrderMap:{1:this.$t("week.monday"),2:this.$t("week.tuesday"),3:this.$t("week.wednesday"),4:this.$t("week.thursday"),5:this.$t("week.friday"),6:this.$t("week.saturday"),7:this.$t("week.sunday")},monthOrderMap:{1:this.$t("month.jan"),2:this.$t("month.feb"),3:this.$t("month.mar"),4:this.$t("month.apr"),5:this.$t("month.may"),6:this.$t("month.june"),7:this.$t("month.july"),8:this.$t("month.aug"),9:this.$t("month.sep"),10:this.$t("month.oct"),11:this.$t("month.nov"),12:this.$t("month.dec")},listQuery:{limit:10,offset:0},loading:!1}},methods:{isDeclineRate:function(e,t){return 0!=t&&(e-t)/t<0},orderPriceRate:function(e,t){return 0==t&&0==e?0:0==t?100:Math.abs((e-t)/t*100)},changeSaleType:function(){this.getProductData()},changeIncomeType:function(){this.getIncome()},changeTaxTime:function(){this.getTaxData()},compare:function(e){return function(t,a){return t[e]-a[e]}},getIncome:function(){var e,t,a=this,n={shop_id:this.shopId,way:this.incomeType};this.incomeType&&(e=n,t=Object(u.c)(e),d.a.get("statistics_income_order"+t)).then((function(e){if("day"===a.incomeType){var t=e.data.sort(a.compare("day"));a.dayIncomeOrder=t}else a.monthIncomeOrder=e.data})).catch((function(){a.$message.error(a.$t("error.serverErr"))}))},getProductData:function(){var e=this,t={shop_id:this.shopId,type:1,way:this.saleType};this.saleType&&Object(p.a)(t).then((function(t){var a=t.data.reduce((function(e,t){return e.push({name:t.name,sales:t.sales}),e}),[]);console.log(a),e.productData=a})).catch((function(){e.$message.error(e.$t("error.serverErr"))}))},getList:function(){this.getTaxData()},getTaxData:function(){var e=this;this.loading=!0,Object(m.b)(".analyze-loading");var t={method:this.TaxShowTime,limit:this.listQuery.limit,offset:this.listQuery.offset};this.TaxShowTime&&h(t).then((function(t){e.loading=!1,setTimeout((function(){Object(m.a)()}),0),e.excelData=t.data.data,e.ordersTotal=t.data.total})).catch((function(t){console.log(t),e.$message.error(e.$t("error.serverErr")),setTimeout((function(){Object(m.a)()}),0)}))},download:function(){var e=this,t={method:this.TaxShowTime,limit:9999,offset:0};this.$message({message:this.$t("message.excelCreate"),type:"info"}),h(t).then((function(t){l(t.data.data.reduce((function(t,a){var n;return t.push((n={},Object(r.a)(n,e.$t("analyze.orderTime"),e.$d(new Date(a.order_date),"long")),Object(r.a)(n,e.$t("analyze.orderId"),a.id),Object(r.a)(n,e.$t("analyze.orderTotalPrice"),a.order_total_price),Object(r.a)(n,e.$t("analyze.orderReceivePrice"),a.order_price),Object(r.a)(n,e.$t("analyze.taxRant"),a.tax_rate),Object(r.a)(n,e.$t("analyze.tax"),a.tax),n)),t}),[]),e.$t("analyze.statistics")),setTimeout((function(){e.$message({message:e.$t("message.excelCreate"),type:"info"})}),0)})).catch((function(){e.$message.error(e.$t("message.excelFailed"))}))}},computed:Object(n.a)({incomeSheet:function(){var e=this;return"day"===this.incomeType?this.dayIncomeOrder.reduce((function(t,a){return t.push({name:e.dayOrderMap[a.day],price:a.price}),t}),[]):this.monthIncomeOrder.reduce((function(t,a){return t.push({name:e.monthOrderMap[a.month],price:a.price}),t}),[])}},Object(f.d)({shopId:function(e){return e.user.loginData.id}})),components:{Pagination:y.a}},w=(a("af1f"),a("2877")),_=Object(w.a)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"mainContent"},[a("div",{staticClass:"analyze-head"},[a("el-row",[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:11,offset:1}},[a("div",{staticClass:"analyze-head-title"},[e._v(e._s(e.$t("analyze.todaySale")))]),a("div",{staticClass:"analyze-head-number bold-number"},[e._v(" "+e._s(e.analyzeInfo.today_order_total_price)+" ")])]),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:11,offset:1}},[a("div",{staticClass:"analyze-head-title"},[e._v(e._s(e.$t("analyze.todayOrder")))]),a("div",{staticClass:"analyze-head-number bold-number"},[e._v(" "+e._s(e.analyzeInfo.today_invalid_orders+e.analyzeInfo.today_valid_orders)+" ")])])],1)],1),a("div",{staticClass:"analyze-pic-content"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11,offset:1}},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"header-wrapper"},[a("div",{staticClass:"header-left"},[a("div",{staticClass:"header-left-up",staticStyle:{"padding-bottom":"10px"}},[e._v(" "+e._s(e.$t("analyze.salesRanking"))+" ")]),a("div",{staticClass:"header-left-down"},[e._v(e._s(e.$t("analyze.topTen")))])]),a("div",{staticClass:"header-right"},[a("el-select",{staticStyle:{width:"100px"},attrs:{"value-key":"",placeholder:"",clearable:"",filterable:""},on:{change:e.changeSaleType},model:{value:e.saleType,callback:function(t){e.saleType=t},expression:"saleType"}},e._l(e.salesOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!(e.productData.length>0),expression:"productData.length > 0 ? false : true"}],staticClass:"analyze_no_data"},[e._v(" "+e._s(e.$t("analyze.noData"))+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.productData.length>0,expression:"productData.length > 0 ? true : false"}]},[a("v-chart",{attrs:{forceFit:!0,height:e.height,data:e.productData,scale:e.scale}},[a("v-tooltip"),a("v-axis"),a("v-bar",{attrs:{position:"name*sales",color:e.color}})],1)],1)])],1),a("el-col",{attrs:{span:11,offset:1}},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"header-wrapper"},[a("div",{staticClass:"header-left"},[e._v(" "+e._s(e.$t("analyze.incomeTrend"))+" ")]),a("div",{staticClass:"header-right"},[a("el-select",{staticStyle:{width:"100px"},attrs:{"value-key":"",clearable:"",filterable:""},on:{change:e.changeIncomeType},model:{value:e.incomeType,callback:function(t){e.incomeType=t},expression:"incomeType"}},e._l(e.incomeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!(e.incomeSheet.length>0),expression:"incomeSheet.length > 0 ? false : true"}],staticClass:"analyze_no_data"},[e._v(" "+e._s(e.$t("analyze.noData"))+" ")]),a("v-chart",{directives:[{name:"show",rawName:"v-show",value:e.incomeSheet.length>0,expression:"incomeSheet.length > 0 ? true : false"}],attrs:{forceFit:!0,height:e.height,data:e.incomeSheet,scale:e.zhexianscale}},[a("v-tooltip"),a("v-axis"),a("v-line",{attrs:{position:"name*price",color:e.color}}),a("v-point",{attrs:{position:"name*price",shape:"circle",color:e.color}})],1)],1)],1)],1)],1),a("div",{staticClass:"analyze-operator-action"},[a("el-button",{attrs:{type:"primary",size:"default"},on:{click:e.download}},[e._v(e._s(e.$t("btn.download")))]),a("el-select",{staticStyle:{width:"100px"},attrs:{"value-key":"",clearable:"",filterable:""},on:{change:e.changeTaxTime},model:{value:e.TaxShowTime,callback:function(t){e.TaxShowTime=t},expression:"TaxShowTime"}},e._l(e.taxOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"analyze-excel-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"analyze-loading"}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"analyze-content-wrapper"},[a("el-table",{attrs:{data:e.excelData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:e.$t("analyze.orderTime"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.$d(new Date(n.order_date),"long")))])]}}])}),e._l(e.tablecols,(function(e){return a("el-table-column",{key:e.id,attrs:{prop:e.id,label:e.label,width:e.width,align:"center"}})}))],2)],1),a("pagination",{attrs:{total:e.ordersTotal,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1)])}),[],!1,null,"4fed6b8b",null);t.default=_.exports},"1fb5":function(e,t,a){"use strict";t.byteLength=function(e){var t=c(e),a=t[0],n=t[1];return 3*(a+n)/4-n},t.toByteArray=function(e){var t,a,n=c(e),i=n[0],s=n[1],l=new o(function(e,t,a){return 3*(t+a)/4-a}(0,i,s)),d=0,u=s>0?i-4:i;for(a=0;a<u;a+=4)t=r[e.charCodeAt(a)]<<18|r[e.charCodeAt(a+1)]<<12|r[e.charCodeAt(a+2)]<<6|r[e.charCodeAt(a+3)],l[d++]=t>>16&255,l[d++]=t>>8&255,l[d++]=255&t;2===s&&(t=r[e.charCodeAt(a)]<<2|r[e.charCodeAt(a+1)]>>4,l[d++]=255&t);1===s&&(t=r[e.charCodeAt(a)]<<10|r[e.charCodeAt(a+1)]<<4|r[e.charCodeAt(a+2)]>>2,l[d++]=t>>8&255,l[d++]=255&t);return l},t.fromByteArray=function(e){for(var t,a=e.length,r=a%3,o=[],i=0,s=a-r;i<s;i+=16383)o.push(d(e,i,i+16383>s?s:i+16383));1===r?(t=e[a-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[a-2]<<8)+e[a-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=i.length;s<l;++s)n[s]=i[s],r[i.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.indexOf("=");return-1===a&&(a=t),[a,a===t?0:4-a%4]}function d(e,t,a){for(var r,o,i=[],s=t;s<a;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},2:function(e,t){},"230f":function(e,t,a){"use strict";a("af2f")},3:function(e,t){},"333d":function(e,t,a){"use strict";a("a9e3");var n={props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total,sizes,prev,pager,next,jumper"},background:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{limit:e,page:this.currentPage})},handleCurrentChange:function(e){this.$emit("pagination",{limit:this.pageSize,page:e})}}},r=(a("230f"),a("2877")),o=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)}),[],!1,null,"6902aa3c",null);t.a=o.exports},"8b6f":function(e,t,a){},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,a,n,r){var o,i,s=8*r-n-1,l=(1<<s)-1,c=l>>1,d=-7,u=a?r-1:0,h=a?-1:1,p=e[t+u];for(u+=h,o=p&(1<<-d)-1,p>>=-d,d+=s;d>0;o=256*o+e[t+u],u+=h,d-=8);for(i=o&(1<<-d)-1,o>>=-d,d+=n;d>0;i=256*i+e[t+u],u+=h,d-=8);if(0===o)o=1-c;else{if(o===l)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,n),o-=c}return(p?-1:1)*i*Math.pow(2,o-n)},t.write=function(e,t,a,n,r,o){var i,s,l,c=8*o-r-1,d=(1<<c)-1,u=d>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(i++,l/=2),i+u>=d?(s=0,i=d):i+u>=1?(s=(t*l-1)*Math.pow(2,r),i+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,r),i=0));r>=8;e[a+p]=255&s,p+=f,s/=256,r-=8);for(i=i<<r|s,c+=r;c>0;e[a+p]=255&i,p+=f,i/=256,c-=8);e[a+p-f]|=128*y}},af1f:function(e,t,a){"use strict";a("8b6f")},af2f:function(e,t,a){},e3db:function(e,t){var a={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},e43c:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var n,r=a("5c96");function o(e){var t={text:"loading......",background:"rgba(255, 255, 255, 0.6)",target:document.querySelector(e)||"body",customClass:"server_loading"};n=r.Loading.service(t)}function i(){n.close()}}}]);
//# sourceMappingURL=chunk-620fa30c.5be3d4e3.js.map