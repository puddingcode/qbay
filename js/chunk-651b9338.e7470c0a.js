(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-651b9338"],{"23d2":function(t,e,i){},"2cf3":function(t,e,i){"use strict";i.r(e);i("13d5"),i("b0c0");var o=i("5530"),a=(i("4160"),i("a434"),i("a9e3"),i("159b"),i("96cf"),i("1da1")),n=i("365c"),s=i("2f62"),c=i("4260"),r=i("e43c"),d={created:function(){this.loadingArray=this.getLoadingArray()},props:["commodityList","total","categoryId"],data:function(){return{sortItems:[],loadingArray:[],loadingShow:!0}},methods:Object(o.a)(Object(o.a)({modifyCommodity:function(t){var e=this.commodityList[t.$index].id;this.$router.push({name:"Adding Goods",params:{id:e}})},deleteCommodity:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function i(){var o,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e.loadingArray.splice(t.$index,1,!0),o=e.commodityList[t.$index].id,i.next=4,n.a.deleteCommodity({id:o});case 4:(a=i.sent).data.id&&(e.loadingArray.splice(t.$index,1,!1),e.$emit("deleteACommodity",a.data.id));case 6:case"end":return i.stop()}}),i)})))()},changeSwitch:function(t){var e=this.commodityList[t.$index].status,i=Object(o.a)(Object(o.a)({},Object(c.b)(t.row,["id","name","oss_url","shop_id","category_id","status","base_price","size","description"])),{},{status:Number(e),size:JSON.parse(t.row.size)});this.modify_commodity(i)}},Object(s.b)({modify_commodity:"commodity/modifyCommodity"})),{},{getLoadingArray:function(){var t=[];return this.commodityList&&this.commodityList.forEach((function(e){return t.push(e.isLoading)})),t},getAPageOfProductList:function(t){var e,i=this;e=this.categoryId?{shop_id:this.shopId,category_id:this.categoryId,page:t,pageNum:10}:{shop_id:this.shopId,page:t,pageNum:10},this.$refs.itemTable.bodyWrapper.scrollTop=0,Object(r.b)(".sortitem_loading_wrapper"),this.loadingShow=!1,this.getProductList(e).then((function(){i.$nextTick((function(){return Object(r.a)()})),i.loadingShow=!0}))},prevClick:function(t){this.getAPageOfProductList(t)},nextClick:function(t){this.getAPageOfProductList(t)},currentChange:function(t){this.getAPageOfProductList(t)}},Object(s.b)({getProductList:"commodity/getCommodityList"})),computed:Object(o.a)({},Object(s.d)({shopId:function(t){return t.user.data.role_id}}))},m=(i("51e0"),i("2877")),l=Object(m.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.loadingShow,expression:"!loadingShow"}],staticClass:"sortitem_loading_wrapper"}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow,expression:"loadingShow"}],staticClass:"commodity_list"},[i("el-table",{ref:"itemTable",staticStyle:{width:"100%"},attrs:{data:t.commodityList,height:"96%"}},[i("el-table-column",{attrs:{label:t.$t("commodity.commodity"),width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{"referrer-policy":"strict-origin-when-cross-origin",src:t.commodityList[e.$index].oss_url}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])])],1),i("el-col",{attrs:{span:12}},[i("div",[t._v(t._s(t.commodityList[e.$index].name))]),i("div",[t._v(t._s(t.commodityList[e.$index].base_price)+"$")])])],1)]}}])}),i("el-table-column",{attrs:{label:t.$t("commodity.display"),"min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-color":"#FE7922","inactive-color":"#DCDCDC"},on:{change:function(i){return t.changeSwitch(e)}},model:{value:t.commodityList[e.$index].status,callback:function(i){t.$set(t.commodityList[e.$index],"status",i)},expression:"commodityList[scope.$index].status"}})]}}])}),i("el-table-column",{attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.modifyCommodity(e)}}},[t._v(" "+t._s(t.$t("btn.modify"))+" ")]),i("el-button",{attrs:{size:"small",type:"primary",loading:t.loadingArray[e.$index],plain:""},on:{click:function(i){return t.deleteCommodity(e)}}},[t._v(" "+t._s(t.$t("btn.delete"))+" ")])]}}])})],1),i("el-pagination",{attrs:{background:"","page-size":10,layout:"prev, pager, next",total:t.total},on:{"prev-click":t.prevClick,"next-click":t.nextClick,"current-change":t.currentChange}})],1)])}),[],!1,null,"c13d8c68",null).exports,u={mounted:function(){var t=this,e={shop_id:this.shopId,page:1,pageNum:10};this.commodityList.length<1&&(this.show=!1),Object(r.b)(".loading_wrapper"),this.getProductCategories(),this.getCommodityList(e).then((function(){t.$nextTick((function(){return Object(r.a)()})),t.show=!0}))},data:function(){return{activeName:"All",currentComponent:l,show:!0,categoryId:null}},methods:Object(o.a)(Object(o.a)({getProductCategories:function(){this.$store.dispatch("commodity/getCommodityCategorityList",{shop_id:this.shopId})},deleteACommodity:function(t){this.deleteCommodity(t)},tabClick:function(t){var e,i=this;this.activeName=t.name,this.show=!1,Object(r.b)(".loading_wrapper"),"All"===t.name?(this.categoryId=null,e={shop_id:this.shopId,page:1,pageNum:10}):(this.categoryId=t.$attrs["data-id"],e={shop_id:this.shopId,category_id:t.$attrs["data-id"],page:1,pageNum:10}),this.getCommodityList(e).then((function(){i.$nextTick((function(){return Object(r.a)()})),i.show=!0}))}},Object(s.b)({getCommodityList:"commodity/getCommodityList",modifyCommodity:"commodity/modifyCommodity"})),Object(s.c)({deleteCommodity:"commodity/UPDATE_COMMODITY_LIST"})),computed:Object(o.a)(Object(o.a)({commodityStatus:function(){return this.$refs.switch}},Object(s.d)({shopId:function(t){return t.user.data.role_id},categoryList:function(t){return t.commodity.commodityCategorityList},commodityList:function(t){return t.commodity.commodityList},commodityNum:function(t){return t.commodity.commodityNum}})),{},{newCommodityList:function(){return this.commodityList.reduce((function(t,e){return e.status=!!e.status,e.isLoading=!1,t.push(e),t}),[])}}),components:{SortItem:l}},h=(i("97f2"),Object(m.a)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"commodity_wrapper"},[i("el-scrollbar",{staticClass:"commodity_title"},[i("el-tabs",{staticClass:"sidebar_tab",staticStyle:{},attrs:{"tab-position":"left"},on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:t.$t("commodity.all"),name:"All"}}),t._l(t.categoryList,(function(t){return i("el-tab-pane",{key:t.id,attrs:{label:t.name,name:t.id+"","data-id":t.id}})}))],2)],1),i("div",{staticClass:"commodity_content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"loading_wrapper"}),t.show?i(t.currentComponent,{tag:"component",attrs:{commodityList:t.newCommodityList,total:t.commodityNum,categoryId:t.categoryId},on:{deleteACommodity:t.deleteACommodity}}):t._e()],1)],1)}),[],!1,null,"348b3b2c",null));e.default=h.exports},"51e0":function(t,e,i){"use strict";var o=i("da83");i.n(o).a},"97f2":function(t,e,i){"use strict";var o=i("23d2");i.n(o).a},da83:function(t,e,i){},e43c:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return s}));var o,a=i("5c96");function n(t){var e={text:"loading......",background:"rgba(255, 255, 255, 0.6)",target:document.querySelector(t)||"body",customClass:"server_loading"};o=a.Loading.service(e)}function s(){o.close()}}}]);
//# sourceMappingURL=chunk-651b9338.e7470c0a.js.map