{"version":3,"sources":["webpack:///./src/views/commodity/sortManagement/index.vue?b68b","webpack:///./src/views/commodity/sortManagement/index.vue?2eb4","webpack:///src/views/commodity/sortManagement/index.vue","webpack:///./src/views/commodity/sortManagement/index.vue","webpack:///./src/views/commodity/sortManagement/index.vue?841a"],"names":["created","this","loadingArr","getLoadingArray","data","sortValue","isAdd","errMsg","computed","rules","methods","handleInput","value","validate","err","field","length","handleDelete","splice","scope","$index","moveup","delete","deleteCommoditySort","id","row","handleMoveup","moveupSortOrder","sortList","forEach","loadingArray","push","addSort","name","display_order","shop_id","component","_vm","_h","$createElement","_c","_self","staticClass","attrs","$t","on","model","callback","$$v","$set","expression","directives","rawName","_v","_s","staticStyle","scopedSlots","_u","key","fn","$event","_e"],"mappings":"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","file":"js/chunk-310fe078.fbffdfd5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sort_wrapper\"},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('commodity.sortNamePlaceholder')},on:{\"input\":_vm.handleInput},model:{value:(_vm.sortValue.sortValue),callback:function ($$v) {_vm.$set(_vm.sortValue, \"sortValue\", $$v)},expression:\"sortValue.sortValue\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.errMsg),expression:\"errMsg\"}],staticClass:\"err\"},[_vm._v(_vm._s(_vm.errMsg))])],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.isAdd},on:{\"click\":_vm.addSort}},[_vm._v(_vm._s(_vm.$t(\"commodity.addTo\")))])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.sortList,\"height\":\"92%\"}},[_c('el-table-column',{attrs:{\"label\":_vm.$t('commodity.sequence'),\"width\":\"width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.$index + 1)+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":_vm.$t('commodity.sortName'),\"width\":\"width\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('commodity.action'),\"width\":\"width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticClass:\"sort_btn\",attrs:{\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.loadingArr[scope.$index] && _vm.loadingArr[scope.$index].moveup},on:{\"click\":function($event){return _vm.handleMoveup(scope)}}},[_vm._v(_vm._s(_vm.$t(\"btn.moveUp\")))]),(scope.row.name === 'other' ? false : true)?_c('el-button',{staticClass:\"sort_btn\",attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\",\"loading\":_vm.loadingArr[scope.$index] && _vm.loadingArr[scope.$index].delete},on:{\"click\":function($event){return _vm.handleDelete(scope)}}},[_vm._v(_vm._s(_vm.$t(\"btn.delete\"))+\" \")]):_vm._e()]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"sort_wrapper\">\n    <el-row :gutter=\"10\">\n      <el-col :span=\"20\">\n        <el-input\n          v-model=\"sortValue.sortValue\"\n          :placeholder=\"$t('commodity.sortNamePlaceholder')\"\n          @input=\"handleInput\"\n        ></el-input>\n        <div class=\"err\" v-show=\"errMsg\">{{ errMsg }}</div>\n      </el-col>\n      <el-col :span=\"4\">\n        <el-button type=\"primary\" :loading=\"isAdd\" @click=\"addSort\">{{\n          $t(\"commodity.addTo\")\n        }}</el-button>\n      </el-col>\n    </el-row>\n    <el-table :data=\"sortList\" style=\"width: 100%\" height=\"92%\">\n      <el-table-column :label=\"$t('commodity.sequence')\" width=\"width\">\n        <template slot-scope=\"scope\">\n          {{ scope.$index + 1 }}\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"name\"\n        :label=\"$t('commodity.sortName')\"\n        width=\"width\"\n      >\n      </el-table-column>\n      <el-table-column :label=\"$t('commodity.action')\" width=\"width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            class=\"sort_btn\"\n            size=\"small\"\n            type=\"primary\"\n            :loading=\"\n              loadingArr[scope.$index] && loadingArr[scope.$index].moveup\n            \"\n            @click=\"handleMoveup(scope)\"\n            >{{ $t(\"btn.moveUp\") }}</el-button\n          >\n          <el-button\n            class=\"sort_btn\"\n            size=\"small\"\n            type=\"primary\"\n            plain\n            :loading=\"\n              loadingArr[scope.$index] && loadingArr[scope.$index].delete\n            \"\n            @click=\"handleDelete(scope)\"\n            v-if=\"scope.row.name === 'other' ? false : true\"\n            >{{ $t(\"btn.delete\") }}\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapMutations, mapState } from \"vuex\";\nimport Schema from \"async-validator\";\nexport default {\n  created() {\n    this.loadingArr = this.getLoadingArray();\n  },\n  data() {\n    return {\n      sortValue: {\n        sortValue: \"\",\n      },\n      isAdd: false,\n      loadingArr: [],\n      errMsg: \"\",\n    };\n  },\n  computed: {\n    rules() {\n      return {\n        sortValue: [\n          {\n            required: true,\n            trigger: \"blur\",\n            message: this.$t(\"commodity.categoryErrMsg\"),\n          },\n          {\n            validator: (rule, value, callback) => {\n              let newVal = value.trim();\n              if (newVal.length < 3 || newVal.length > 20) {\n                callback(new Error(this.$t(\"commodity.sortLengthErrMsg\")));\n              } else {\n                callback();\n              }\n            },\n          },\n          {\n            validator: (rule, value, callback) => {\n              let matchArray = this.sortList.filter(\n                (item) => item.name === value.trim()\n              );\n              if (matchArray.length > 0) {\n                callback(new Error(this.$t(\"error.sameNameErr\")));\n              } else {\n                callback();\n              }\n            },\n          },\n        ],\n      };\n    },\n    ...mapState({\n      sortList: (state) => state.commodity.commodityCategorityList,\n    }),\n  },\n  methods: {\n    handleInput(value) {\n      this.sortValue.sortValue = value;\n      const validator = new Schema(this.rules);\n      validator.validate(this.sortValue, (err, field) => {\n        if (err && field.sortValue.length > 0) {\n          this.errMsg = field.sortValue[0].message;\n        } else {\n          this.errMsg = null;\n        }\n      });\n    },\n    handleDelete(scope) {\n      this.loadingArr.splice(scope.$index, 1, {\n        moveup: false,\n        delete: true,\n      });\n      this.deleteCommoditySort({\n        id: scope.row.id,\n      })\n        .then(() => {\n          this.loadingArr.splice(scope.$index, 1, {\n            moveup: false,\n            delete: false,\n          });\n          this.$message.success(this.$t(\"public.deleteSuccessMsg\"));\n        })\n        .catch(() => {\n          this.loadingArr.splice(scope.$index, 1, {\n            moveup: false,\n            delete: false,\n          });\n        });\n    },\n    handleMoveup(scope) {\n      this.loadingArr.splice(scope.$index, 1, {\n        moveup: true,\n        delete: false,\n      });\n      this.moveupSortOrder(scope.row)\n        .then(() => {\n          this.loadingArr.splice(scope.$index, 1, {\n            moveup: false,\n            delete: false,\n          });\n        })\n        .catch(() => {\n          this.loadingArr.splice(scope.$index, 1, {\n            moveup: false,\n            delete: false,\n          });\n        });\n    },\n    getLoadingArray() {\n      let loadingArray = [];\n      this.sortList.forEach(() => {\n        loadingArray.push({\n          moveup: false,\n          delete: false,\n        });\n      });\n      return loadingArray;\n    },\n\n    addSort() {\n      const validator = new Schema(this.rules);\n      validator.validate(this.sortValue, (err, field) => {\n        if (err && field.sortValue.length > 0) {\n          this.errMsg = field.sortValue[0].message;\n        } else {\n          this.errMsg = null;\n          this.isAdd = true;\n          let obj = {\n            name: this.sortValue.sortValue.trim(),\n            display_order: 1,\n            shop_id: this.$store.state.user.loginData.id,\n          };\n          this.addCommoditySort(obj).then(() => {\n            this.sortValue.sortValue = \"\";\n            this.isAdd = false;\n            this.loadingArr = this.getLoadingArray();\n          });\n        }\n      });\n    },\n    ...mapMutations({\n      addCommodityCategoryList: \"commodity/ADD_COMMODITY_CATEGORITY_LIST\",\n      changeCommodityCategoryListSort:\n        \"commodity/CHENGE_COMMODITY_CATEGORY_SORT\",\n    }),\n    ...mapActions({\n      addCommoditySort: \"commodity/addCommoditySort\",\n      deleteCommoditySort: \"commodity/deleteCommoditySort\",\n      moveupSortOrder: \"commodity/alterSortDisplayOrder\",\n    }),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.sort_wrapper {\n  height: calc(100vh - 200px);\n}\n\n.sort_btn {\n  width: 90px;\n}\n\n.err {\n  color: #f56c6c;\n  font-size: 12px;\n  height: 12px;\n  padding-left: 12px;\n}\n</style>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1f4bcf5b&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1f4bcf5b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f4bcf5b\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1f4bcf5b&lang=scss&scoped=true&\""],"sourceRoot":""}