{"version":3,"sources":["webpack:///./src/views/commodity/addingGoods/index.vue?7bea","webpack:///./src/views/commodity/addingGoods/index.vue?c8f5","webpack:///src/views/commodity/addingGoods/index.vue","webpack:///./src/views/commodity/addingGoods/index.vue","webpack:///./src/views/commodity/addingGoods/index.vue?b92f","webpack:///./src/util/aws.config.js","webpack:///./src/util/loading.js"],"names":["created","this","isModifyPage","getProductInfo","data","avatarLoading","form","id","shop_id","$store","state","user","loginData","category_id","name","description","size","status","oss_url","choose","house_price","pack_price","specification","types","$route","params","isComplete","sortErrStatus","sortErrMsg","isClickCompleteBtn","computed","rules","chooseRules","methods","addSpecification","validateSortInfo","validate","console","log","field","err","setTimeout","Number","deleteSpecification","splice","scope","$index","returnList","$router","push","complete","$refs","valid","modifyCom","modifyCommmodity","then","confirmButtonText","callback","addCom","addCommodity","dispatch","beforeAvatarUpload","isJPG","$message","error","$t","isLt2M","uploadFile","file","components","component","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","attrs","span","directives","rawName","value","expression","slot","ref","model","$$v","$set","_l","item","key","scopedSlots","_u","fn","toString","_n","on","$event","staticStyle","_e","AWS","config","update","region","credentials","CognitoIdentityCredentials","IdentityPoolId","s3","S3","apiVersion","Bucket","addPhoto","files","startLoading","type","Vue","prototype","showClose","message","i18n","t","Promise","reject","msg","prototyoe","index","lastIndexOf","suffix","slice","length","photoKey","uid","upload","Key","Body","ACL","partSize","queueSize","promise","addIndex","loadingInstance","targetdq","options","text","background","target","document","querySelector","customClass","Loading","service","endLoading","close"],"mappings":"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","file":"js/chunk-8b3fef2a.ce7e35d2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-scrollbar',{staticClass:\"adding_goods_wrapper\"},[_c('div',{staticClass:\"addinggoods_content_wrapper\"},[_c('div',{staticClass:\"commodityTitle\"},[_vm._v(_vm._s(_vm.$t(\"commodity.information\")))]),_c('el-row',{attrs:{\"type\":\"flex\"}},[_c('el-col',{staticClass:\"picture_wrapper\",attrs:{\"lg\":{ span: 5 },\"span\":8}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"show-file-list\":false,\"http-request\":_vm.uploadFile,\"before-upload\":_vm.beforeAvatarUpload}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.avatarLoading),expression:\"avatarLoading\"}],staticClass:\"avatar_loading\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.avatarLoading),expression:\"!avatarLoading\"}]},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.form.oss_url}}),_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"public.picInfo\"))+\" \")])])])],1),_c('el-col',{staticClass:\"information_wrapper\",attrs:{\"lg\":{ span: 19 },\"span\":16}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-position\":\"left\",\"label-width\":\"100px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('commodity.sort'),\"prop\":\"category_id\"}},[_c('el-select',{model:{value:(_vm.form.category_id),callback:function ($$v) {_vm.$set(_vm.form, \"category_id\", $$v)},expression:\"form.category_id\"}},_vm._l((_vm.commoditySort),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('commodity.name'),\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('commodity.description'),\"prop\":\"description\"}},[_c('el-input',{model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1)],1)],1)],1),_c('el-divider'),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-table',{attrs:{\"data\":_vm.specification}},[_c('el-table-column',{attrs:{\"label\":_vm.$t('commodity.specification'),\"width\":\"width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{attrs:{\"label\":scope},model:{value:(_vm.choose.size),callback:function ($$v) {_vm.$set(_vm.choose, \"size\", $$v)},expression:\"choose.size\"}},_vm._l((_vm.types),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.value,\"value\":item.value}})}),1)]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('commodity.dineInPrice'),\"width\":\"width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"type\":\"number\",\"label\":scope.$index.toString(),\"placeholder\":_vm.$t('commodity.pricePlaceholder')},model:{value:(_vm.choose.house_price),callback:function ($$v) {_vm.$set(_vm.choose, \"house_price\", _vm._n($$v))},expression:\"choose.house_price\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('commodity.takeAwayPrice'),\"width\":\"width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"type\":\"number\",\"label\":scope.$index.toString(),\"placeholder\":_vm.$t('commodity.pricePlaceholder')},model:{value:(_vm.choose.pack_price),callback:function ($$v) {_vm.$set(_vm.choose, \"pack_price\", _vm._n($$v))},expression:\"choose.pack_price\"}})]}}])}),_c('el-table-column',{attrs:{\"width\":\"width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addSpecification(scope)}}},[_vm._v(_vm._s(_vm.$t(\"btn.add\")))])]}}])})],1),_c('div',{staticClass:\"sort_error\"},[_vm._v(_vm._s(_vm.sortErrMsg))]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.form.size}},[_c('el-table-column',{attrs:{\"prop\":\"size\",\"width\":\"width\"}}),_c('el-table-column',{attrs:{\"prop\":\"house_price\",\"width\":\"width\"}}),_c('el-table-column',{attrs:{\"prop\":\"pack_price\",\"width\":\"width\"}}),_c('el-table-column',{attrs:{\"width\":\"width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.deleteSpecification(scope)}}},[_vm._v(_vm._s(_vm.$t(\"btn.delete\")))])]}}])})],1)],1)],1),_c('el-row',{attrs:{\"gutter\":10,\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"span\":8}},[(_vm.isModifyPage)?_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.returnList}},[_vm._v(_vm._s(_vm.$t(\"btn.return\")))]):_vm._e()],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.isComplete},on:{\"click\":_vm.complete}},[_vm._v(_vm._s(_vm.$t(\"btn.complete\")))])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <el-scrollbar class=\"adding_goods_wrapper\">\n    <div class=\"addinggoods_content_wrapper\">\n      <div class=\"commodityTitle\">{{ $t(\"commodity.information\") }}</div>\n      <el-row type=\"flex\">\n        <el-col :lg=\"{ span: 5 }\" :span=\"8\" class=\"picture_wrapper\">\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"\"\n            :show-file-list=\"false\"\n            :http-request=\"uploadFile\"\n            :before-upload=\"beforeAvatarUpload\"\n          >\n            <div class=\"avatar_loading\" v-show=\"avatarLoading\"></div>\n            <div v-show=\"!avatarLoading\">\n              <img :src=\"form.oss_url\" class=\"avatar\" />\n              <i class=\"el-icon-plus avatar-uploader-icon\"></i>\n              <div slot=\"tip\" class=\"el-upload__tip\">\n                {{ $t(\"public.picInfo\") }}\n              </div>\n            </div>\n          </el-upload>\n        </el-col>\n        <el-col :lg=\"{ span: 19 }\" :span=\"16\" class=\"information_wrapper\">\n          <el-form\n            ref=\"form\"\n            :model=\"form\"\n            label-position=\"left\"\n            label-width=\"100px\"\n            :rules=\"rules\"\n          >\n            <el-form-item :label=\"$t('commodity.sort')\" prop=\"category_id\">\n              <el-select v-model=\"form.category_id\">\n                <el-option\n                  v-for=\"item in commoditySort\"\n                  :key=\"item.id\"\n                  :label=\"item.name\"\n                  :value=\"item.id\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item :label=\"$t('commodity.name')\" prop=\"name\">\n              <el-input v-model=\"form.name\"></el-input>\n            </el-form-item>\n            <el-form-item\n              :label=\"$t('commodity.description')\"\n              prop=\"description\"\n            >\n              <el-input v-model=\"form.description\"></el-input>\n            </el-form-item>\n          </el-form>\n        </el-col>\n      </el-row>\n      <el-divider></el-divider>\n      <el-row>\n        <el-col :span=\"12\">\n          <el-table :data=\"specification\">\n            <el-table-column\n              :label=\"$t('commodity.specification')\"\n              width=\"width\"\n            >\n              <template slot-scope=\"scope\">\n                <el-select v-model=\"choose.size\" :label=\"scope\">\n                  <el-option\n                    v-for=\"item in types\"\n                    :key=\"item.value\"\n                    :label=\"item.value\"\n                    :value=\"item.value\"\n                  >\n                  </el-option>\n                </el-select>\n              </template>\n            </el-table-column>\n            <el-table-column :label=\"$t('commodity.dineInPrice')\" width=\"width\">\n              <template slot-scope=\"scope\">\n                <el-input\n                  type=\"number\"\n                  v-model.number=\"choose.house_price\"\n                  :label=\"scope.$index.toString()\"\n                  :placeholder=\"$t('commodity.pricePlaceholder')\"\n                ></el-input>\n              </template>\n            </el-table-column>\n            <el-table-column\n              :label=\"$t('commodity.takeAwayPrice')\"\n              width=\"width\"\n            >\n              <template slot-scope=\"scope\">\n                <el-input\n                  type=\"number\"\n                  v-model.number=\"choose.pack_price\"\n                  :label=\"scope.$index.toString()\"\n                  :placeholder=\"$t('commodity.pricePlaceholder')\"\n                ></el-input>\n              </template>\n            </el-table-column>\n            <!-- <el-table-column label=\"Left\" width=\"width\">\n                    <template slot-scope=\"scope\">\n                        <el-input v-model.number=\"choose.left\" :label=\"scope.$index.toString()\" placeholder=\"enter count\"></el-input>\n                    </template>\n                </el-table-column> -->\n            <el-table-column width=\"width\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"medium\"\n                  type=\"primary\"\n                  @click=\"addSpecification(scope)\"\n                  >{{ $t(\"btn.add\") }}</el-button\n                >\n              </template>\n            </el-table-column>\n          </el-table>\n          <div class=\"sort_error\">{{ sortErrMsg }}</div>\n          <el-table :data=\"form.size\" style=\"width: 100%\">\n            <el-table-column prop=\"size\" width=\"width\"> </el-table-column>\n            <el-table-column prop=\"house_price\" width=\"width\">\n            </el-table-column>\n            <el-table-column prop=\"pack_price\" width=\"width\"> </el-table-column>\n            <el-table-column width=\"width\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                  @click=\"deleteSpecification(scope)\"\n                  >{{ $t(\"btn.delete\") }}</el-button\n                >\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"10\" type=\"flex\" justify=\"center\">\n        <el-col :span=\"8\">\n          <el-button\n            type=\"primary\"\n            plain\n            @click=\"returnList\"\n            v-if=\"isModifyPage\"\n            >{{ $t(\"btn.return\") }}</el-button\n          >\n        </el-col>\n        <el-col :span=\"8\">\n          <el-button type=\"primary\" :loading=\"isComplete\" @click=\"complete\">{{\n            $t(\"btn.complete\")\n          }}</el-button>\n        </el-col>\n      </el-row>\n    </div>\n  </el-scrollbar>\n</template>\n\n<script>\nimport { mapActions, mapState } from \"vuex\";\nimport { copyObjectProperties } from \"@/util\";\nimport { addPhoto } from \"@/util/aws.config.js\";\nimport { endLoading } from \"@/util/loading.js\";\nimport Schema from \"async-validator\";\n\nexport default {\n  created() {\n    if (this.isModifyPage) {\n      this.getProductInfo();\n    }\n  },\n  data() {\n    return {\n      avatarLoading: false,\n      form: {\n        id: \"\",\n        shop_id: this.$store.state.user.loginData.id,\n        category_id: \"\",\n        name: \"\",\n        // base_price: '',\n        description: \"\",\n        size: [],\n        status: 1,\n        oss_url: \"\",\n      },\n\n      choose: {\n        size: \"L\",\n        house_price: null,\n        pack_price: null,\n      },\n\n      specification: [{}],\n      types: [\n        {\n          value: \"L\",\n          label: \"L\",\n        },\n        {\n          value: \"M\",\n          label: \"M\",\n        },\n        {\n          value: \"S\",\n          label: \"S\",\n        },\n      ],\n\n      isModifyPage: this.$route.params.id,\n      isComplete: false,\n      sortErrStatus: false,\n      sortErrMsg: \"\",\n      isClickCompleteBtn: false,\n    };\n  },\n  computed: {\n    rules() {\n      return {\n        description: [\n          {\n            required: true,\n            message: this.$t(\"commodity.descriptionErrMsg\"),\n            trigger: \"blur\",\n          },\n        ],\n        category_id: [\n          {\n            required: true,\n            type: \"number\",\n            message: this.$t(\"commodity.categoryErrMsg\"),\n            trigger: \"blur\",\n          },\n        ],\n        name: [\n          {\n            required: true,\n            message: this.$t(\"commodity.nameErrMsg\"),\n            trigger: \"blur\",\n          },\n        ],\n      };\n    },\n    chooseRules() {\n      return {\n        size: [\n          {\n            required: true,\n          },\n          {\n            validator: (rule, value, callback) => {\n              this.form.size.filter((item) => item.size === value).length &&\n                callback(new Error(this.$t(\"error.sameNameErr\")));\n              callback();\n            },\n          },\n        ],\n        // price: {\n        //   required: true,\n        //   message: this.$t(\"commodity.priceErrMsg\"),\n        // },\n      };\n    },\n    ...mapState({\n      commoditySort: (state) => state.commodity.commodityCategorityList,\n      commodityInfo: (state) => state.commodity.commodityInfo,\n    }),\n  },\n  methods: {\n    ...mapActions({\n      modifyCommmodity: \"commodity/modifyCommodity\",\n      addCommodity: \"commodity/addCommodity\",\n    }),\n    addSpecification() {\n      this.validateSortInfo();\n    },\n    // 校验sort的相关信息\n    validateSortInfo() {\n      const validator = new Schema(this.chooseRules);\n      validator.validate(this.choose, (err, field) => {\n        console.log(field);\n        if (err) {\n          this.sortErrStatus = true;\n          this.sortErrMsg = err[0].message;\n          setTimeout(() => {\n            this.sortErrMsg = \"\";\n          }, 1000);\n        } else {\n          let { size, house_price, pack_price } = this.choose;\n          if (house_price == null && pack_price == null) {\n            this.sortErrStatus = true;\n            this.sortErrMsg = this.$t(\"commodity.priceCountErr\");\n            setTimeout(() => {\n              this.sortErrMsg = \"\";\n            }, 1000);\n            return;\n          } else {\n            this.sortErrStatus = false;\n          }\n          // 如果不是点击的complete按钮，就添加\n          if (!this.isClickCompleteBtn) {\n            this.form.size.push({\n              size,\n              house_price: house_price ? Number(house_price) : null,\n              pack_price: pack_price ? Number(pack_price) : null,\n            });\n            this.choose.house_price = null;\n            this.choose.pack_price = null;\n          }\n        }\n      });\n    },\n\n    deleteSpecification(scope) {\n      this.form.size.splice(scope.$index, 1);\n    },\n    returnList() {\n      this.$router.push({\n        name: \"Commodity List\",\n      });\n    },\n    complete() {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          //判断一下form.size是不是为空，如果为空，就进行校验，否则不校验\n          console.log(this.form.size.length);\n          if (this.form.size.length > 0) {\n            this.isComplete = true;\n            //如果是add添加界面，不上传id\n            if (this.isModifyPage) {\n              this.modifyCom();\n            } else {\n              this.addCom();\n            }\n          } else {\n            this.validateSortInfo();\n            // 没有错误信息\n            // 有错误就是true，没有错误就是false\n            console.log(this.sortErrStatus);\n            if (!this.sortErrStatus) {\n              this.isComplete = true;\n              //如果是add添加界面，不上传id\n              if (this.isModifyPage) {\n                this.modifyCom();\n              } else {\n                this.addCom();\n              }\n            }\n          }\n        }\n      });\n    },\n    // 修改商品\n    modifyCom() {\n      this.modifyCommmodity(this.form).then(() => {\n        this.isComplete = false;\n        this.$alert(this.$t(\"commodity.alterInfo\"), {\n          confirmButtonText: this.$t(\"btn.confirm\"),\n          callback: () => {\n            this.$router.push({\n              name: \"Commodity List\",\n            });\n          },\n        });\n      });\n    },\n    // 添加商品\n    addCom() {\n      delete this.form.id;\n      let params = {\n        ...this.form,\n        // base_price: Number(this.form.base_price),\n      };\n      this.addCommodity(params).then(\n        (res) => {\n          this.isComplete = false;\n          if (res.data.code === 0) {\n            this.$message.error(this.$t(\"error.sameNameErr\"));\n          } else {\n            this.$confirm(this.$t(\"commodity.confirmInfo\"), \"tips\", {\n              confirmButtonText: this.$t(\"btn.confirm\"),\n              cancelButtonText: this.$t(\"btn.cancel\"),\n            })\n              .then(() => {\n                // 点击确认清空数据\n                this.form.category_id = \"\";\n                this.form.name = \"\";\n                // this.form.base_price = '';\n                this.form.description = \"\";\n                this.form.oss_url = \"\";\n                this.form.size = [];\n                this.choose.house_price = \"\";\n                this.choose.pack_price = \"\";\n                this.choose.left = \"\";\n              })\n              .catch(() => {\n                this.$router.push({\n                  name: \"Commodity List\",\n                });\n              });\n          }\n        },\n        () => {\n          this.isComplete = false;\n        }\n      );\n    },\n    getProductInfo() {\n      let id = this.$route.params.id;\n      this.$store.dispatch(\"commodity/getProductInfo\", id).then((res) => {\n        let obj = [\n          \"category_id\",\n          \"name\",\n          // 'base_price',\n          \"description\",\n          \"size\",\n          \"id\",\n          \"shop_id\",\n          \"oss_url\",\n        ];\n        let newData = copyObjectProperties(res, obj);\n        this.form = {\n          ...this.form,\n          ...newData,\n        };\n      });\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === \"image/jpeg\" || \"image/png\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(this.$t(\"error.picTypeErr\"));\n      }\n      if (!isLt2M) {\n        this.$message.error(this.$t(\"error.picMaxErr\"));\n      }\n    },\n    uploadFile(file) {\n      console.log(file);\n      this.avatarLoading = true;\n      addPhoto(file).then(\n        (data) => {\n          this.avatarLoading = false;\n          endLoading();\n          this.form.oss_url = data.Location;\n        },\n        (err) => {\n          this.avatarLoading = false;\n          endLoading();\n          if (!err.msg) {\n            this.$message.error(this.$t(\"error.picUploadErr\"));\n          }\n        }\n      );\n    },\n  },\n\n  components: {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.addinggoods_content_wrapper {\n  padding-right: 1em;\n}\n.adding_goods_wrapper {\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.avatar-uploader .el-upload {\n  border: 1px dashed hsl(0, 0%, 85%);\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n\n.avatar_loading {\n  height: 178px;\n  width: 178px;\n}\n\n.sort_error {\n  color: #f56c6c;\n  font-size: 12px;\n  height: 12px;\n  padding-left: 12px;\n}\n\n@media screen and (max-width: 1400px) and(min-width: 1200px) {\n  .picture_wrapper {\n    width: 28%;\n  }\n\n  .information_wrapper {\n    width: 72%;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4cc0315a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4cc0315a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cc0315a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4cc0315a&lang=scss&scoped=true&\"","import AWS from 'aws-sdk';\nimport Vue from 'vue';\nimport i18n from '@/lang/index.js';\nimport { startLoading } from '@/util/loading.js';\nvar albumBucketName = 'test.znox.top.images';\nvar bucketRegion = 'ap-southeast-2';\nvar IdentityPoolId = 'ap-southeast-2:3690eca5-99fb-4e84-8cf4-74ec0ac8162c';\n\nAWS.config.update({\n  region: bucketRegion,\n  credentials: new AWS.CognitoIdentityCredentials({\n    IdentityPoolId: IdentityPoolId,\n  }),\n});\n\nvar s3 = new AWS.S3({\n  apiVersion: '2006-03-01',\n  params: {\n    Bucket: albumBucketName,\n  },\n});\n\n// 添加照片\nexport function addPhoto(files) {\n  startLoading('.avatar_loading');\n  const file = files.file;\n  const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n  const isLt2M = file.size / 1024 / 1024 < 2;\n\n  if (!isJPG) {\n    Vue.prototype.$message({\n      showClose: true,\n      message: i18n.t('error.picTypeErr'),\n      type: 'error',\n    });\n    return Promise.reject({ msg: 'uploaderr' });\n  }\n  if (!isLt2M) {\n    Vue.prototyoe.$message({\n      showClose: true,\n      message: i18n.t('error.picMaxErr'),\n      type: 'error',\n    });\n    return Promise.reject({ msg: 'uploaderr' });\n  }\n  let index = file.name.lastIndexOf('.');\n  let suffix = file.name.slice(index, file.name.length);\n  let photoKey = 'static/images/' + file.uid + suffix;\n  let options = {\n    partSize: 10 * 1024 * 1024,\n    queueSize: 1,\n  };\n  return s3\n    .upload(\n      {\n        Bucket: albumBucketName,\n        Key: photoKey,\n        Body: file,\n        ACL: 'public-read',\n      },\n      options\n    )\n    .promise();\n}\n\nexport function addIndex(files) {\n  const file = files.file;\n  console.log(file);\n  return s3\n    .upload({\n      Bucket: albumBucketName,\n      Key: 'index.html',\n      Body: file,\n      ACL: 'public-read',\n    })\n    .promise()\n    .then(\n      (data) => {\n        console.log('success', data);\n      },\n      (err) => {\n        console.log('failed', err);\n      }\n    );\n}\n","import { Loading } from 'element-ui'\n\nlet loadingInstance\n\nexport function startLoading(targetdq) {\n    let options = {\n        text: 'loading......',\n        background: 'rgba(255, 255, 255, 0.6)',\n        target: document.querySelector(targetdq) || 'body',\n        customClass: 'server_loading'\n    }\n    loadingInstance = Loading.service(options)\n}\n\nexport function endLoading() {\n    loadingInstance.close()\n}\n\n"],"sourceRoot":""}