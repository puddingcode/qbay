{"version":3,"sources":["webpack:///./src/views/commodity/buffet/index.vue?8ac7","webpack:///./src/views/commodity/buffet/index.vue?04ac","webpack:///src/views/commodity/buffet/index.vue","webpack:///./src/views/commodity/buffet/index.vue","webpack:///./src/util/aws.config.js","webpack:///./src/views/commodity/buffet/index.vue?c101","webpack:///./src/util/loading.js"],"names":["data","avatarLoading","options","set_photo_url","form","id","shop_id","this","$store","state","user","loginData","category_id","name","description","size","status","oss_url","value","tableData","submitflag","ruleForm","set_name","set_price","set_time","rules","mounted","shopId","getProductList","obj","then","console","log","getSetMealList","methods","submitForm","$refs","formName","validate","valid","add","$confirm","$t","confirmButtonText","cancelButtonText","type","delet","index","deletFlag","buffet_id","buffetId","addSetMeal","parseInt","getProductInfo","dispatch","beforeAvatarUpload","isJPG","$message","error","isLt2M","uploadFile","file","computed","component","_vm","_h","$createElement","_c","_self","staticClass","attrs","directives","rawName","expression","slot","_v","_s","ref","model","callback","$$v","$set","staticStyle","on","$event","scopedSlots","_u","key","fn","scope","_l","row","item","buffet_detail","products_name","$index","disabled","AWS","config","update","region","credentials","CognitoIdentityCredentials","IdentityPoolId","s3","S3","apiVersion","params","Bucket","addPhoto","files","startLoading","Vue","prototype","showClose","message","i18n","t","Promise","reject","msg","prototyoe","lastIndexOf","suffix","slice","length","photoKey","uid","upload","Key","Body","ACL","partSize","queueSize","promise","addIndex","err","loadingInstance","targetdq","text","background","target","document","querySelector","customClass","Loading","service","endLoading","close"],"mappings":"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","file":"js/chunk-7e7d37a9.c3de5cf8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"buffet_wrapper\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"show-file-list\":false,\"http-request\":_vm.uploadFile,\"before-upload\":_vm.beforeAvatarUpload}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.avatarLoading),expression:\"avatarLoading\"}],staticClass:\"avatar_loading\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.avatarLoading),expression:\"!avatarLoading\"}]},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.set_photo_url}}),_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"public.picInfo\"))+\" \")])])])],1),_c('el-col',{attrs:{\"span\":20}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('buffet.setMeal'),\"prop\":\"set_name\"}},[_c('el-input',{model:{value:(_vm.ruleForm.set_name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"set_name\", $$v)},expression:\"ruleForm.set_name\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('buffet.setPrice'),\"prop\":\"set_price\"}},[_c('el-input',{staticStyle:{\"width\":\"130px\"},attrs:{\"type\":\"number\"},model:{value:(_vm.ruleForm.set_price),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"set_price\", $$v)},expression:\"ruleForm.set_price\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('buffet.timeLimit'),\"prop\":\"set_time\"}},[_c('el-input',{staticStyle:{\"width\":\"130px\"},attrs:{\"placeholder\":_vm.$t('buffet.minutes'),\"type\":\"number\"},model:{value:(_vm.ruleForm.set_time),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"set_time\", $$v)},expression:\"ruleForm.set_time\"}}),_c('el-button',{staticClass:\"btn\",staticStyle:{\"margin-left\":\"100px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.submitflag},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(_vm._s(_vm.$t(\"buffet.submit\")))])],1)],1)],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\",\"header-cell-style\":{ 'text-align': 'center' },\"cell-style\":{ 'text-align': 'center' }}},[_c('el-table-column',{attrs:{\"prop\":\"set_name\",\"label\":_vm.$t('buffet.setMeals'),\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"set_price\",\"label\":_vm.$t('buffet.setPrices'),\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"set_time\",\"label\":_vm.$t('buffet.timeLimits'),\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('buffet.foodDetails'),\"width\":\"250\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.buffet_detail),function(item){return _c('span',{key:item.buffet_detail},[_vm._v(_vm._s(item.products_name + \"、\"))])})}}])}),_c('el-table-column',{attrs:{\"prop\":\"buffet_detail\",\"label\":_vm.$t('buffet.operation')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{attrs:{\"placeholder\":_vm.$t('buffet.add')},on:{\"change\":function($event){return _vm.add(scope.row.buffet_id, scope.row.name, scope.$index)}},model:{value:(scope.row.name),callback:function ($$v) {_vm.$set(scope.row, \"name\", $$v)},expression:\"scope.row.name\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id,\"disabled\":item.disabled}})}),1),_c('el-button',{staticClass:\"btn\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\",\"loading\":_vm.tableData[scope.$index].deletFlag},on:{\"click\":function($event){return _vm.delet(scope.row.buffet_id, scope.$index)}}},[_vm._v(_vm._s(_vm.$t(\"btn.delete\")))])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<!--\n * @Author: your name\n * @Date: 1970-01-01 08:00:00\n * @LastEditTime: 2021-01-04 09:18:22\n * @LastEditors: your name\n * @Description: In User Settings Edit\n * @FilePath: /webAdmin/src/views/commodity/buffet/index.vue\n-->\n<template>\n  <el-card class=\"buffet_wrapper\">\n    <el-row>\n      <el-col :span=\"4\">\n        <el-upload\n          class=\"avatar-uploader\"\n          action\n          :show-file-list=\"false\"\n          :http-request=\"uploadFile\"\n          :before-upload=\"beforeAvatarUpload\"\n        >\n          <div class=\"avatar_loading\" v-show=\"avatarLoading\"></div>\n          <div v-show=\"!avatarLoading\">\n            <img :src=\"set_photo_url\" class=\"avatar\" />\n            <i class=\"el-icon-plus avatar-uploader-icon\"></i>\n            <div slot=\"tip\" class=\"el-upload__tip\">\n              {{ $t(\"public.picInfo\") }}\n            </div>\n          </div>\n        </el-upload>\n      </el-col>\n      <el-col :span=\"20\">\n        <el-form\n          :model=\"ruleForm\"\n          :rules=\"rules\"\n          ref=\"ruleForm\"\n          label-width=\"150px\"\n        >\n          <el-form-item :label=\"$t('buffet.setMeal')\" prop=\"set_name\">\n            <el-input v-model=\"ruleForm.set_name\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('buffet.setPrice')\" prop=\"set_price\">\n            <el-input\n              v-model=\"ruleForm.set_price\"\n              style=\"width: 130px\"\n              type=\"number\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('buffet.timeLimit')\" prop=\"set_time\">\n            <el-input\n              v-model=\"ruleForm.set_time\"\n              style=\"width: 130px\"\n              :placeholder=\"$t('buffet.minutes')\"\n              type=\"number\"\n            ></el-input>\n            <el-button\n              type=\"primary\"\n              class=\"btn\"\n              style=\"margin-left: 100px\"\n              @click=\"submitForm('ruleForm')\"\n              :loading=\"submitflag\"\n              >{{ $t(\"buffet.submit\") }}</el-button\n            >\n          </el-form-item>\n        </el-form>\n      </el-col>\n    </el-row>\n    <el-table\n      :data=\"tableData\"\n      stripe\n      style=\"width: 100%\"\n      :header-cell-style=\"{ 'text-align': 'center' }\"\n      :cell-style=\"{ 'text-align': 'center' }\"\n    >\n      <el-table-column\n        prop=\"set_name\"\n        :label=\"$t('buffet.setMeals')\"\n        width=\"180\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"set_price\"\n        :label=\"$t('buffet.setPrices')\"\n        width=\"100\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"set_time\"\n        :label=\"$t('buffet.timeLimits')\"\n        width=\"100\"\n      ></el-table-column>\n      <el-table-column :label=\"$t('buffet.foodDetails')\" width=\"250\">\n        <template slot-scope=\"scope\">\n          <span\n            v-for=\"item in scope.row.buffet_detail\"\n            :key=\"item.buffet_detail\"\n            >{{ item.products_name + \"、\" }}</span\n          >\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"buffet_detail\" :label=\"$t('buffet.operation')\">\n        <template slot-scope=\"scope\">\n          <el-select\n            v-model=\"scope.row.name\"\n            :placeholder=\"$t('buffet.add')\"\n            @change=\"add(scope.row.buffet_id, scope.row.name, scope.$index)\"\n          >\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n              :disabled=\"item.disabled\"\n            ></el-option>\n          </el-select>\n          <el-button\n            @click=\"delet(scope.row.buffet_id, scope.$index)\"\n            class=\"btn\"\n            type=\"primary\"\n            plain\n            size=\"small\"\n            style=\"margin-left: 20px\"\n            :loading=\"tableData[scope.$index].deletFlag\"\n            >{{ $t(\"btn.delete\") }}</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n  </el-card>\n</template>\n\n<script>\nimport { mapActions, mapState } from \"vuex\";\nimport { copyObjectProperties } from \"@/util\";\nimport { addPhoto } from \"@/util/aws.config.js\";\nimport { endLoading } from \"@/util/loading.js\";\nexport default {\n  data() {\n    return {\n      avatarLoading: false,\n      options: [],\n      set_photo_url: \"\",\n      form: {\n        id: \"\",\n        shop_id: this.$store.state.user.loginData.id,\n        category_id: \"\",\n        name: \"\",\n        // base_price: '',\n        description: \"\",\n        size: [],\n        status: 1,\n        oss_url: \"\",\n      },\n      value: \"\",\n      tableData: [],\n      submitflag: false,\n      ruleForm: {\n        set_name: \"\",\n        set_price: \"\",\n        set_time: \"\",\n        set_photo_url: \"\",\n      },\n      rules: {\n        set_name: [\n          {\n            required: true,\n            message: this.$t(\"buffet.setMeals\"),\n            trigger: \"blur\",\n          },\n        ],\n        set_price: [\n          {\n            required: true,\n            message: this.$t(\"buffet.setPrices\"),\n            trigger: \"blur\",\n          },\n        ],\n        set_time: [\n          {\n            required: true,\n            message: this.$t(\"buffet.timeLimits\"),\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  mounted() {\n    let obj = {\n      shop_id: this.shopId,\n    };\n    this.getProductList(obj).then((data) => {\n      console.log(data);\n      this.options = data.product_data;\n    });\n    this.getSetMealList();\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          console.log(\"2\");\n          this.submitflag = true;\n          this.addSetMeal();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    add(buffetId, productsId, index) {\n      // 这里发起请求，将商品id给后台\n      this.$confirm(this.$t(\"buffet.addConfirm\"), this.$t(\"buffet.tips\"), {\n        confirmButtonText: this.$t(\"btn.confirm\"),\n        cancelButtonText: this.$t(\"btn.cancel\"),\n        type: \"success\",\n      })\n        .then(() => {\n          this.tableData[index].deletFlag = true;\n          let obj = {\n            shop_id: this.shopId,\n            buffet_id: buffetId,\n            products_id: productsId,\n          };\n          this.$store\n            .dispatch(\"commodity/addBuffetProduct\", obj)\n            .then((res) => {\n              console.log(res, \"成功\");\n              this.getSetMealList();\n              this.$message({\n                type: \"success\",\n                message: this.$t(\"public.addSuccessMsg\"),\n              });\n            })\n            .catch((err) => {\n              console.log(err);\n              if (err.data.message == \"The product has been in the buffet.\") {\n                this.$message.error(this.$t(\"buffet.repeat\"));\n              }\n            });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: this.$t(\"btn.cancel\"),\n          });\n        });\n    },\n    delet(buffetId, index) {\n      this.tableData[index].deletFlag = true;\n      console.log(this.tableData);\n      let obj = {\n        shop_id: this.shopId,\n        buffet_id: buffetId,\n      };\n      this.$store\n        .dispatch(\"commodity/delBuffet\", obj)\n        .then((res) => {\n          console.log(res, \"成功删除\");\n          this.getSetMealList();\n        })\n        .catch((err) => {\n          console.log(err);\n          this.deletFlag = false;\n          this.$message.error(err);\n        });\n    },\n    addSetMeal() {\n      let obj = {\n        shop_id: this.shopId,\n        set_name: this.ruleForm.set_name,\n        set_price: parseInt(this.ruleForm.set_price),\n        set_time: parseInt(this.ruleForm.set_time),\n        set_photo_url: this.set_photo_url,\n      };\n      this.$store\n        .dispatch(\"commodity/addSetMeal\", obj)\n        .then((res) => {\n          console.log(res, \"1111\");\n          this.getSetMealList();\n        })\n        .catch((err) => {\n          if (err.data.code == 3001) {\n            this.$message.error(this.$t(\"buffet.packgeRepeat\"));\n          }\n          this.submitflag = false;\n        });\n    },\n    getSetMealList() {\n      let obj = {\n        shop_id: this.shopId,\n      };\n      this.$store\n        .dispatch(\"commodity/getSetMealList\", obj)\n        .then((res) => {\n          let obj = res.buffets;\n          for (let i = 0; i < obj.length; i++) {\n            obj[i].deletFlag = false;\n          }\n          this.tableData = obj;\n          this.submitflag = false;\n          console.log(this.tableData, \"套餐列表\");\n        })\n        .catch((err) => {\n          console.log(err);\n          if (err.data.code == 3001) {\n            this.$message.error(this.$t(\"error.serverErr\"));\n          }\n          this.submitflag = false;\n          this.deletFlag = false;\n        });\n    },\n    getProductInfo() {\n      let id = this.$route.params.id;\n      this.$store.dispatch(\"commodity/getProductInfo\", id).then((res) => {\n        let obj = [\n          \"category_id\",\n          \"name\",\n          // 'base_price',\n          \"description\",\n          \"size\",\n          \"id\",\n          \"shop_id\",\n          \"oss_url\",\n        ];\n        let newData = copyObjectProperties(res, obj);\n        this.form = {\n          ...this.form,\n          ...newData,\n        };\n      });\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === \"image/jpeg\" || \"image/png\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(this.$t(\"error.picTypeErr\"));\n      }\n      if (!isLt2M) {\n        this.$message.error(this.$t(\"error.picMaxErr\"));\n      }\n    },\n    uploadFile(file) {\n      console.log(file);\n      this.avatarLoading = true;\n      addPhoto(file).then(\n        (data) => {\n          this.avatarLoading = false;\n          endLoading();\n          console.log(data.Location);\n          this.set_photo_url = data.Location;\n        },\n        (err) => {\n          this.avatarLoading = false;\n          endLoading();\n          if (!err.msg) {\n            this.$message.error(this.$t(\"error.picUploadErr\"));\n          }\n        }\n      );\n    },\n    ...mapActions({\n      getProductList: \"commodity/getCommodityList\",\n    }),\n  },\n  computed: {\n    ...mapState({\n      shopId: (state) => state.user.loginData.id,\n    }),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.buffet_wrapper {\n  height: 100%;\n  overflow-y: auto;\n  font-size: 14px;\n  .row {\n    margin-bottom: 20px;\n    text-align: right;\n  }\n  .row:last-child {\n    padding-bottom: 20px;\n    border-bottom: 1px solid #dcdfe6;\n  }\n}\n.btn {\n  width: 80px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed hsl(0, 0%, 85%);\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n\n.avatar_loading {\n  height: 178px;\n  width: 178px;\n}\n\n.sort_error {\n  color: #f56c6c;\n  font-size: 12px;\n  height: 12px;\n  padding-left: 12px;\n}\n\n@media screen and (max-width: 1400px) and(min-width: 1200px) {\n  .picture_wrapper {\n    width: 28%;\n  }\n\n  .information_wrapper {\n    width: 72%;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=35da0038&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=35da0038&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"35da0038\",\n  null\n  \n)\n\nexport default component.exports","import AWS from 'aws-sdk';\nimport Vue from 'vue';\nimport i18n from '@/lang/index.js';\nimport { startLoading } from '@/util/loading.js';\nvar albumBucketName = 'test.znox.top.images';\nvar bucketRegion = 'ap-southeast-2';\nvar IdentityPoolId = 'ap-southeast-2:3690eca5-99fb-4e84-8cf4-74ec0ac8162c';\n\nAWS.config.update({\n  region: bucketRegion,\n  credentials: new AWS.CognitoIdentityCredentials({\n    IdentityPoolId: IdentityPoolId,\n  }),\n});\n\nvar s3 = new AWS.S3({\n  apiVersion: '2006-03-01',\n  params: {\n    Bucket: albumBucketName,\n  },\n});\n\n// 添加照片\nexport function addPhoto(files) {\n  startLoading('.avatar_loading');\n  const file = files.file;\n  const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n  const isLt2M = file.size / 1024 / 1024 < 2;\n\n  if (!isJPG) {\n    Vue.prototype.$message({\n      showClose: true,\n      message: i18n.t('error.picTypeErr'),\n      type: 'error',\n    });\n    return Promise.reject({ msg: 'uploaderr' });\n  }\n  if (!isLt2M) {\n    Vue.prototyoe.$message({\n      showClose: true,\n      message: i18n.t('error.picMaxErr'),\n      type: 'error',\n    });\n    return Promise.reject({ msg: 'uploaderr' });\n  }\n  let index = file.name.lastIndexOf('.');\n  let suffix = file.name.slice(index, file.name.length);\n  let photoKey = 'static/images/' + file.uid + suffix;\n  let options = {\n    partSize: 10 * 1024 * 1024,\n    queueSize: 1,\n  };\n  return s3\n    .upload(\n      {\n        Bucket: albumBucketName,\n        Key: photoKey,\n        Body: file,\n        ACL: 'public-read',\n      },\n      options\n    )\n    .promise();\n}\n\nexport function addIndex(files) {\n  const file = files.file;\n  console.log(file);\n  return s3\n    .upload({\n      Bucket: albumBucketName,\n      Key: 'index.html',\n      Body: file,\n      ACL: 'public-read',\n    })\n    .promise()\n    .then(\n      (data) => {\n        console.log('success', data);\n      },\n      (err) => {\n        console.log('failed', err);\n      }\n    );\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=35da0038&lang=scss&scoped=true&\"","import { Loading } from 'element-ui'\n\nlet loadingInstance\n\nexport function startLoading(targetdq) {\n    let options = {\n        text: 'loading......',\n        background: 'rgba(255, 255, 255, 0.6)',\n        target: document.querySelector(targetdq) || 'body',\n        customClass: 'server_loading'\n    }\n    loadingInstance = Loading.service(options)\n}\n\nexport function endLoading() {\n    loadingInstance.close()\n}\n\n"],"sourceRoot":""}