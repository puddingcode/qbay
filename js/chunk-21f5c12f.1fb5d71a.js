(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-21f5c12f"],{"515c":function(t,e,r){"use strict";r.r(e);r("4de4"),r("4160"),r("a434"),r("b0c0"),r("498a"),r("159b");var o=r("5530"),a=r("2f62"),i=r("a15e"),s={created:function(){this.loadingArr=this.getLoadingArray()},data:function(){var t=this;return{sortValue:{sortValue:""},isAdd:!1,loadingArr:[],errMsg:"",rules:{sortValue:[{required:!0,trigger:"blur",message:this.$t("commodity.categoryErrMsg")},{validator:function(e,r,o){var a=r.trim();a.length<3||a.length>20?o(new Error(t.$t("commodity.sortLengthErrMsg"))):o()}},{validator:function(e,r,o){t.sortList.filter((function(t){return t.name===r.trim()})).length>0?o(new Error(t.$t("error.sameNameErr"))):o()}}]}}},computed:Object(o.a)({},Object(a.d)({sortList:function(t){return t.commodity.commodityCategorityList}})),methods:Object(o.a)(Object(o.a)({handleInput:function(t){var e=this;this.sortValue.sortValue=t,new i.default(this.rules).validate(this.sortValue,(function(t,r){t&&r.sortValue.length>0?e.errMsg=r.sortValue[0].message:e.errMsg=null}))},handleDelete:function(t){var e=this;this.loadingArr.splice(t.$index,1,{moveup:!1,delete:!0}),this.deleteCommoditySort({id:t.row.id}).then((function(){e.loadingArr.splice(t.$index,1,{moveup:!1,delete:!1})})).catch((function(){e.loadingArr.splice(t.$index,1,{moveup:!1,delete:!1}),e.$message.error(e.$t("error.serverErr"))}))},handleMoveup:function(t){var e=this;this.loadingArr.splice(t.$index,1,{moveup:!0,delete:!1}),this.moveupSortOrder(t.row).then((function(){e.loadingArr.splice(t.$index,1,{moveup:!1,delete:!1})})).catch((function(){e.$message.error(e.$t("error.serverErr")),e.loadingArr.splice(t.$index,1,{moveup:!1,delete:!1})}))},getLoadingArray:function(){var t=[];return this.sortList.forEach((function(){t.push({moveup:!1,delete:!1})})),t},addSort:function(){var t=this;new i.default(this.rules).validate(this.sortValue,(function(e,r){if(e&&r.sortValue.length>0)t.errMsg=r.sortValue[0].message;else{t.errMsg=null,t.isAdd=!0;var o={name:t.sortValue.sortValue.trim(),display_order:1,shop_id:t.$store.state.user.data.role_id};t.addCommoditySort(o).then((function(){t.sortValue.sortValue="",t.isAdd=!1,t.loadingArr=t.getLoadingArray()}))}}))}},Object(a.c)({addCommodityCategoryList:"commodity/ADD_COMMODITY_CATEGORITY_LIST",changeCommodityCategoryListSort:"commodity/CHENGE_COMMODITY_CATEGORY_SORT"})),Object(a.b)({addCommoditySort:"commodity/addCommoditySort",deleteCommoditySort:"commodity/deleteCommoditySort",moveupSortOrder:"commodity/alterSortDisplayOrder"}))},n=(r("b1f5"),r("2877")),l=Object(n.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sort_wrapper"},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{placeholder:t.$t("commodity.sortNamePlaceholder")},on:{input:t.handleInput},model:{value:t.sortValue.sortValue,callback:function(e){t.$set(t.sortValue,"sortValue",e)},expression:"sortValue.sortValue"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:t.errMsg,expression:"errMsg"}],staticClass:"err"},[t._v(t._s(t.errMsg))])],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary",loading:t.isAdd},on:{click:t.addSort}},[t._v(t._s(t.$t("commodity.addTo")))])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sortList,height:"92%"}},[r("el-table-column",{attrs:{label:t.$t("commodity.sequence"),width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),r("el-table-column",{attrs:{prop:"name",label:t.$t("commodity.sortName"),width:"width"}}),r("el-table-column",{attrs:{label:t.$t("commodity.action"),width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{staticClass:"sort_btn",attrs:{size:"small",type:"primary",loading:t.loadingArr[e.$index].moveup},on:{click:function(r){return t.handleMoveup(e)}}},[t._v(t._s(t.$t("btn.moveUp")))]),r("el-button",{staticClass:"sort_btn",attrs:{size:"small",type:"primary",plain:"",loading:t.loadingArr[e.$index].delete},on:{click:function(r){return t.handleDelete(e)}}},[t._v(t._s(t.$t("btn.delete")))])]}}])})],1)],1)}),[],!1,null,"2c3fa73e",null);e.default=l.exports},"921f":function(t,e,r){},b1f5:function(t,e,r){"use strict";var o=r("921f");r.n(o).a}}]);
//# sourceMappingURL=chunk-21f5c12f.1fb5d71a.js.map